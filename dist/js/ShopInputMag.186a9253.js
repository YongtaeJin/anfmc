(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ShopInputMag"],{acfa:function(t,i,e){"use strict";e.r(i);var a=function(){var t,i,e,a,s,o,n,l,c,r,h,d,p,_,f,u,v,m=this,k=m._self._c;return k("v-container",{attrs:{fluid:""}},[k("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[k("v-toolbar-title",[m._v("사업신청관리 :")]),k("v-col",{attrs:{sm:"3",md:"3"}},[k("v-select",{staticClass:"my-text-field no-padding",staticStyle:{"font-size":"0.8rem"},attrs:{items:m.shopList,"item-text":"n_shop","item-value":"i_shop",dense:""},on:{input:m.fetchData},model:{value:m.selectShop,callback:function(t){m.selectShop=t},expression:"selectShop"}})],1),k("v-spacer"),k("tooltip-btn",{attrs:{label:"조회"},on:{click:m.fetchData}},[k("v-icon",[m._v("mdi-magnify")])],1)],1),k("v-row",[k("v-col",{attrs:{col:"12",sm:"5",md:"5"}},[k("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:m.head1,items:m.shopInputs,"item-key":"i_id","single-select":"","items-per-page":-1,"hide-default-footer":"",height:m.iframeHeight},scopedSlots:m._u([{key:"item",fn:function({item:t}){return[k("tr",{staticClass:"center-align",class:{row_select:t===m.selected1},on:{click:function(i){return m.selectItem1(t)}}},[k("td",{attrs:{align:"left"},on:{click:function(t){return m.clickDocItem(m.tabs)}}},[m._v(m._s(t.n_company)+" ")]),k("td",{class:{greencol:"1"==t.f_persioninfo,redcol:"1"!=t.f_persioninfo},on:{click:function(t){return m.clickDocItem(m.tabs)}}},[m._v(" "+m._s(m.datachk(t.f_persioninfo))+" ")]),k("td",{class:{greencol:"Y"==t.chk1,redcol:"Y"!=t.chk1},on:{click:function(t){return m.clickDocItem(0)}}},[m._v(" "+m._s(m.datachk(t.chk1))+" ")]),k("td",{class:{greencol:"Y"==t.chk2,redcol:"Y"!=t.chk2},on:{click:function(t){return m.clickDocItem(1)}}},[m._v(" "+m._s(m.datachk(t.chk2))+" ")]),k("td",{class:{greencol:"Y"==t.chk3,redcol:"Y"!=t.chk3},on:{click:function(t){return m.clickDocItem(2)}}},[m._v(" "+m._s(m.datachk(t.chk3))+" ")]),k("td",{class:{greencol:"Y"==t.f_dochk,redcol:"Y"!=t.f_dochk},on:{dblclick:function(i){return m.f_dochk(t)}}},[k("u",[m._v(m._s(m.datachk2(t.f_dochk)))])]),k("td",{class:{greencol:"Y"==t.f_enarachk,redcol:"Y"!=t.f_enarachk},on:{dblclick:function(i){return m.f_enarachk(t)}}},[k("u",[m._v(m._s(m.datachk2(t.f_enarachk)))])])])]}}])})],1),k("v-col",{attrs:{col:"12",sm:"7",md:"7"}},[k("v-tabs",{attrs:{height:"30px","background-color":"primary",dark:""},model:{value:m.tabs,callback:function(t){m.tabs=t},expression:"tabs"}},[k("v-tab",{staticStyle:{"font-size":"0.7rem"},attrs:{value:"tbapage_1"}},[m._v("회사정보")]),k("v-tab",{staticStyle:{"font-size":"0.7rem"},attrs:{value:"tbapage_2"}},[m._v("신청서류")]),k("v-tab",{staticStyle:{"font-size":"0.7rem"},attrs:{value:"tbapage_3"}},[m._v("추가서류")])],1),k("v-tabs-items",{model:{value:m.tabs,callback:function(t){m.tabs=t},expression:"tabs"}},[k("v-tab-item",[k("v-card-text",[k("table",{staticClass:"type03"},[k("tr",[k("th",[m._v("업체명")]),k("td",[m._v(m._s(null===(t=m.itemInput)||void 0===t?void 0:t.n_company))])]),k("tr",[k("th",[m._v("사업자번호")]),k("td",[m._v(m._s(null===(i=m.itemInput)||void 0===i?void 0:i.i_regno))])]),k("tr",[k("th",[m._v("대표자")]),k("td",[m._v(m._s(null===(e=m.itemInput)||void 0===e?void 0:e.n_person))])]),k("tr",[k("th",[m._v("대표자주민번호")]),k("td",[m._v(m._s(null===(a=m.itemInput)||void 0===a?void 0:a.i_presno))])]),k("tr",[k("th",[m._v("연락처(유선)")]),k("td",[m._v(m._s(null===(s=m.itemInput)||void 0===s?void 0:s.t_tel1))])]),k("tr",[k("th",[m._v("휴대폰")]),k("td",[m._v(m._s(null===(o=m.itemInput)||void 0===o?void 0:o.t_tel2))])]),k("tr",[k("th",[m._v("이메일")]),k("td",[m._v(m._s(null===(n=m.itemInput)||void 0===n?void 0:n.i_email))])]),k("tr",[k("th",[m._v("사업자구분")]),k("td",[m._v(m._s(null===(l=m.itemInput)||void 0===l?void 0:l.f_saugup))])]),k("tr",[k("th",[m._v("이전중진공사업")]),k("td",[m._v(m._s(null===(c=m.itemInput)||void 0===c?void 0:c.f_run))])]),k("tr",[k("th",[m._v("3년 표준 재무제표")]),k("td",[m._v(m._s(null===(r=m.itemInput)||void 0===r?void 0:r.f_dart))])]),k("tr",[k("th",[m._v("이나라도움 아이디")]),k("td",[m._v(m._s(null===(h=m.itemInput)||void 0===h?void 0:h.t_enarainfo))])]),k("tr",[k("th",[m._v("이나라도움 패스워드")]),k("td",[m._v(m._s(null===(d=m.itemInput)||void 0===d?void 0:d.t_enarainfopw))])]),k("tr",[k("th",[m._v("우편번호")]),k("td",[m._v(m._s(null===(p=m.itemInput)||void 0===p?void 0:p.i_post))])]),k("tr",[k("th",[m._v("주소")]),k("td",[m._v(m._s(null===(_=m.itemInput)||void 0===_?void 0:_.t_addr1))])]),k("tr",[k("th",[m._v("세부 주소")]),k("td",[m._v(m._s(null===(f=m.itemInput)||void 0===f?void 0:f.t_addr2))])])])])],1),k("v-tab-item",[k("shop-input-mag-file-form",{attrs:{fileLists:m.fileAddsA,companyName:null===(u=m.selected1)||void 0===u?void 0:u.n_company},on:{process:m.saveDocProcess,mailSend:m.mailSend}})],1),k("v-tab-item",[k("shop-input-mag-file-form",{attrs:{fileLists:m.fileAddsB,companyName:null===(v=m.selected1)||void 0===v?void 0:v.n_company},on:{process:m.saveDocProcess,mailSend:m.mailSend}})],1)],1)],1)],1),k("tiptab-mail",{ref:"dialog",attrs:{label:"메일발송",body_content:this.mailinfo.body,mail_title:this.mailinfo.title,itemInput:this.itemInput,"max-width":"900","max-height":"1300",persistent:""},on:{onSend:m.sendMail}}),k("ez-dialog-2",{ref:"ez_wait",attrs:{label:"처리중","max-width":"200",persistent:"",color:"primary"}})],1)},s=[],o=(e("14d9"),e("762b")),n=e("414b"),l=e("0e60"),c=e("a01d"),r={components:{ShopInputMagFileForm:o["a"],TooltipBtn:n["a"],EzDialog2:l["a"],TiptabMail:c["a"]},name:"ShopInputMag",data(){return{iframeHeight:500,tabs:0,selectShop:null,shopList:[],head1:[{text:"업체명",value:"n_company",align:"center",sortable:!1},{text:"정보동의",value:"f_persioninfo",sortable:!1,align:"center",width:"10%"},{text:"회사정보",value:"chk1",sortable:!1,align:"center",width:"10%"},{text:"신청서류",value:"chk2",sortable:!1,align:"center",width:"10%"},{text:"추가정보",value:"chk3",sortable:!1,align:"center",width:"10%"},{text:"공방서류",value:"f_dochk",sortable:!1,align:"center",width:"10%"},{text:"e 나라",value:"f_enarachk",sortable:!1,align:"center",width:"10%"}],shopInputs:[],selected1:[],itemInput:null,fileAddsA:[],fileAddsB:[],mailinfo:{title:"",to_email:"",cc_email:"",body:""}}},beforeCreate(){var t;null!==(t=this.$store.state.user.member)&&void 0!==t&&t.c_com||this.$router.push("/").catch(()=>{this.$toast.error("잘못된 접급 입니다.")})},mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.init(),this.fetchData()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},methods:{adjustIframeHeight(){const t=window.innerHeight;this.iframeHeight=t-200},async init(){this.shopList=await this.$axios.get("/api/shopinfo/getShopList"),this.shopList.length&&(this.selectShop=this.shopList[0].i_shop,await this.fetchData())},async fetchData(){if(!this.selectShop)return void(this.shopList=[]);const t={i_shop:this.selectShop};this.shopInputs=await this.$axios.post("/api/shopinfo/getShopInputMag",t)},async selectItem1(t){if(this.selected1==t)return;const i=t;this.isLoading=!0,this.selected1=t,this.itemInput=await this.$axios.post("/api/shopinfo/getShopInputMag1",t),i.f_gubun="1",this.fileAddsA=await this.$axios.post("/api/shopinfo/getShopInputMag2",i),i.f_gubun="2",this.fileAddsB=await this.$axios.post("/api/shopinfo/getShopInputMag2",i),this.isLoading=!1},datachk(t){return"-"==t?"":"1"==t||"Y"==t?"완료":"미등록"},datachk2(t){return"1"==t||"Y"==t?"완료":"미완료"},clickDocItem(t){this.tabs=t},async mailSend(){let t="<p>상기 제목 관련 하여 아래와 같이 첨부 서류 확인 결과 전달 드립니다.</p><p>";1===this.tabs?(this.mailinfo.title="스마트공방 신청 서류 확인 안내",t=t+"공방 신청 서류</p>"+await this.makeBody(this.fileAddsA)):2===this.tabs&&(this.mailinfo.title="스마트공방 추가 서류 확인 안내",t=t+"공방 추가 서류</p>"+await this.makeBody(this.fileAddsB)),this.mailinfo.body=t,this.$refs.dialog.open()},async sendMail(t,i,e,a){this.$refs.ez_wait.open(),this.mailinfo.title=t,this.mailinfo.to_email=i,this.mailinfo.cc_email=e,this.mailinfo.body=a;const s=await this.$axios.post("/api/shopinfo/postMailSend",this.form);this.$refs.ez_wait.close(),"ok"==s&&(this.$ezNotify.alert("정상적으로 메일 발송 하였습니다..... ","성공"),this.$refs.dialog.close())},async makeBody(t){let i="";return t.forEach(t=>{let e="Y"==t.f_noact?"접수":"N"==t.f_noact?"반려":"I"==t.f_noact||"R"==t.f_noact?"검토":"미등록";i+=`<p>${"Y"==t.f_noact?"":'<span style="color:red"'}>${t.n_filename} : 서류${e}${"Y"==t.f_noact?"":"</span>"}</p>`}),i+="<p>반려된 첨부서류에 대해서 재 등록 부탁 드립니다.</p>",i+="<p></p>감사 합니다.",i},async f_dochk(t){const i=await this.$ezNotify.confirm("처리 하시겠습니까  ?","공방서류");if(i){"Y"==t.f_dochk?t.f_dochk="N":t.f_dochk="Y";await this.$axios.post("/api/shopinfo/ShopInputMagDocChk",t)}},async f_enarachk(t){const i=await this.$ezNotify.confirm("처리 하시겠습니까  ?","이나라도움 등록");if(i)if("Y"==t.f_enarachk)t.f_enarachk="N";else{t.f_enarachk="Y";await this.$axios.post("/api/shopinfo/ShopInputMageNaraChk",t)}},async saveDocProcess(t){for(let i in t)if("1"==t[i].f_edit){this.$axios.post("/api/shopinfo/ShopInputMag2Save",t[i])}}}},h=r,d=e("2877"),p=Object(d["a"])(h,a,s,!1,null,null,null);i["default"]=p.exports}}]);
//# sourceMappingURL=ShopInputMag.186a9253.js.map