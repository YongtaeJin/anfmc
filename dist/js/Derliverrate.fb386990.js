(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Derliverrate"],{"2ada":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("납기내역")]),e("v-spacer"),e("tooltip-btn",{attrs:{label:"조회"},on:{click:t.view}},[e("v-icon",[t._v("mdi-magnify")])],1)],1),e("v-card",{staticClass:"my-card text-input-blue my-text-fontsize",staticStyle:{display:"flex",height:"34px"}},[e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"70px"}},[e("v-text-field",{staticClass:"no-padding",attrs:{value:"  수주납기일 : ",readonly:"",dense:"","hide-details":""}})],1),e("input-dateft",{attrs:{value2:t.form.sDate2},on:{"update:value2":function(e){return t.$set(t.form,"sDate2",e)}},model:{value:t.form.sDate1,callback:function(e){t.$set(t.form,"sDate1",e)},expression:"form.sDate1"}}),e("div",{staticStyle:{width:"56px"}},[e("v-text-field",{staticClass:"no-padding",attrs:{value:"    발주처 : ",readonly:"",dense:"","hide-details":""}})],1),e("div",{staticStyle:{width:"100px"}},[e("v-text-field",{staticClass:"text-input-blue no-padding",attrs:{dense:"","hide-detail":""},model:{value:t.form.sVend,callback:function(e){t.$set(t.form,"sVend",e)},expression:"form.sVend"}})],1)],1)]),e("v-row",[e("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[e("v-data-table",{ref:"table",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.masterHead,items:t.masters,"item-key":"c_vend","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},"item-class":t.row_classes,height:"400px","max-height":"400px"},on:{"click:row":t.rowSelectMaster},scopedSlots:t._u([{key:"item.p_per",fn:function({item:i}){return[e("v-progress-linear",{attrs:{value:t.calPer(i),color:"blue",height:"18"}},[e("strong",[t._v(t._s(t.calPer(i))+"%")])])]}}],null,!0),model:{value:t.selectedM,callback:function(e){t.selectedM=e},expression:"selectedM"}})],1),e("v-col",{attrs:{col:"12",sm:"8",md:"8"}},[e("v-data-table",{ref:"table",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.itemHead,items:t.itemListFilter,"item-key":"i_orderser","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:"400px","max-height":"400px"},on:{"click:row":t.rowSelectDetail},scopedSlots:t._u([{key:"item",fn:function({item:i}){return[t.shouldMergeRow(i)?e("tr",{staticClass:"center-align",class:{row_select:i===t.itemInfo},on:{click:function(e){return t.selectItem(i)}}},[e("td",{attrs:{rowspan:t.getRowspan(i)}},[t._v(t._s(i.i_orderno))]),e("td",{attrs:{rowspan:t.getRowspan(i)}},[t._v(t._s(i.s_date2))]),e("td",[t._v(" "+t._s(i.n_item)+" ")]),e("td",[t._v(" "+t._s(i.t_size)+" ")]),e("td",[t._v(" "+t._s(i.m_cnt)+" ")]),e("td",[t._v(" "+t._s(i.s_duedate)+" ")]),e("td",[t._v(" "+t._s(i.m_shipcnt)+" ")]),e("td",[t._v(" "+t._s(i.d_ship)+" ")]),e("td",[t._v(" "+t._s(i.m_ordshipcnt)+" ")]),e("td",[t._v(" "+t._s(i.n_status)+" ")])]):e("tr",{staticClass:"center-align",class:{row_select:i===t.itemInfo},on:{click:function(e){return t.selectItem(i)}}},[e("td",[t._v(" "+t._s(i.n_item)+" ")]),e("td",[t._v(" "+t._s(i.t_size)+" ")]),e("td",[t._v(" "+t._s(i.m_cnt)+" ")]),e("td",[t._v(" "+t._s(i.s_duedate)+" ")]),e("td",[t._v(" "+t._s(i.m_shipcnt)+" ")]),e("td",[t._v(" "+t._s(i.d_ship)+" ")]),e("td",[t._v(" "+t._s(i.m_ordshipcnt)+" ")]),e("td",[t._v(" "+t._s(i.n_status)+" ")])])]}}]),model:{value:t.selectedD,callback:function(e){t.selectedD=e},expression:"selectedD"}})],1)],1),e("v-toolbar",{attrs:{height:"30px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("항목(품목)별 평균출하 소요일 ")]),e("v-spacer")],1),e("v-data-table",{ref:"item-makeavg",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.dayMakeAvgHead,items:t.dayMakeList,"item-key":"c_item","single-select":"","hide-default-footer":"","item-class":t.row_classes,"items-per-page":-1,height:t.iframeHeight},on:{"click:row":t.rowSelectmake}})],1)},s=[],n=(i("13d5"),i("414b")),l=i("d1b1"),r=i("64f2"),o={components:{InputDateft:l["a"],TooltipBtn:n["a"]},name:"Derliverrate",mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.init()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},data(){return{comma:r["comma"],form:{sDate1:"",sDate2:"",sVend:""},iframeHeight:200,masterHead:[{text:"거래처",value:"n_vend",sortable:!1,align:"center",width:"80px"},{text:"수주건수",value:"m_ordcnt",sortable:!1,align:"center",width:"50px"},{text:"준수",value:"m_ok",sortable:!1,align:"center",width:"50px"},{text:"미준수",value:"m_no",sortable:!1,align:"center",width:"50px"},{text:"진행",value:"m_ing",sortable:!1,align:"center",width:"50px"},{text:"준수율",value:"p_per",sortable:!1,align:"center",width:"50px"}],masters:[],masterinfo:[],selectedM:[],itemHead:[{text:"발주번호",value:"i_orderno",sortable:!1,align:"center",width:"80px"},{text:"발주납기",value:"s_date2",sortable:!1,align:"center",width:"60px"},{text:"항목(품목)",value:"n_item",sortable:!1,align:"center",width:"130px"},{text:"규격(사양)",value:"t_size",sortable:!1,align:"center",width:"100px"},{text:"수량",value:"m_cnt",sortable:!1,align:"center",width:"60px"},{text:"납기일",value:"s_duedate",sortable:!1,align:"center",width:"60px"},{text:"출하수량",value:"m_shipcnt",sortable:!1,align:"center",width:"60px"},{text:"출하일",value:"d_ship",sortable:!1,align:"center",width:"60px"},{text:"출하소요일",value:"m_ordshipcnt",sortable:!1,align:"center",width:"60px"},{text:"납기상태",value:"n_status",sortable:!1,align:"center",width:"60px"}],itemLists:[],itemInfo:[],itemListFilter:[],selectedD:[],itemLists:[],dayMakeAvgHead:[{text:"품번",value:"c_item",sortable:!1,align:"center",width:"100"},{text:"항목(품목)",value:"n_item",sortable:!1,align:"center",width:"150"},{text:"규격(사양)",value:"t_size",sortable:!1,align:"center",width:"150"},{text:"출하건수",value:"m_shicnt",sortable:!1,align:"center",width:"80px"},{text:"출하일수",value:"m_ordshipcnt",sortable:!1,align:"center",width:"80px"},{text:"평균출하 소요일",value:"m_avgship",sortable:!1,align:"center",width:"80px"}],dayMakeList:[],dayMakeInfo:[],selectMake:[]}},methods:{adjustIframeHeight(){const t=window.innerHeight;this.iframeHeight=t-200-450},async init(){this.form.sDate1=Object(r["getDate"])(-365,1),await this.view()},async view(){this.masters=[],this.masterinfo=[],this.selectedM=[],this.itemListFilter=[],this.itemInfo=[],this.selectedD=[],this.masters=await this.GetDerliver(),this.itemLists=await this.$axios.post("/api/metrics/getDerliverratedt",this.form),this.dayMakeList=await this.$axios.post("/api/metrics/getDerliverrateAvg",this.form)},async GetDerliver(){const t=await this.$axios.post("/api/metrics/getDerliverrate",this.form);if(t.length){const e={};e.c_com=this.masterinfo.c_com,e.c_vend="전체",e.n_vend="전체",e.m_ordcnt=this.sumFilder(t,"m_ordcnt"),e.m_no=this.sumFilder(t,"m_no"),e.m_ing=this.sumFilder(t,"m_ing"),e.m_ok=this.sumFilder(t,"m_ok");t.unshift(e)}return t},sumFilder(t,e){return t.reduce((t,i)=>t+(Number(i[e])||0),0)},row_classes(t){if("전체"==t.c_vend)return"orange"},rowSelectMaster:function(t,e){this.masterinfo=t,this.rowFilter(t),e?e.select(!0):this.selectedM=[t]},rowFilter(t){this.itemLists.length>0?this.itemListFilter=this.itemLists.filter(e=>"전체"==t.c_vend||e.c_vend==t.c_vend&&e.c_com==t.c_com):this.itemListFilter=[]},rowSelectDetail:function(t,e){this.itemInfo=t,e?e.select(!0):this.selectedD=[t]},calPer(t){let e=0;return Number(t.m_ordcnt)-Number(t.m_ing)>0&&(e=Number(t.m_ok)/(Number(t.m_ordcnt)-Number(t.m_ing)),e=(100*e).toFixed(2)),e},shouldMergeRow(t){const e=this.itemListFilter.findIndex(e=>e.i_orderno===t.i_orderno);return e===this.itemListFilter.indexOf(t)},getRowspan(t){const e=this.itemListFilter.filter(e=>e.i_orderno===t.i_orderno).length;return e},async selectItem(t){this.itemInfo!=t&&(this.itemInfo=t)},rowSelectmake:function(t,e){this.dayMakeInfo.c_item!=t.c_item&&(this.dayMakeInfo=t,e?e.select(!0):this.selectMake=[t])}}},d=o,c=i("2877"),m=Object(c["a"])(d,a,s,!1,null,null,null);e["default"]=m.exports},"414b":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:a}){return[e("v-btn",t._g(t._b({class:t.childClass,on:{click:function(e){return t.$emit("click")}}},"v-btn",{...a,...t.$attrs},!1),i),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},s=[],n={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},l=n,r=i("2877"),o=Object(r["a"])(l,a,s,!1,null,null,null);e["a"]=o.exports},d1b1:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"190px",display:"flex"}},[e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({attrs:i}){return[e("v-text-field",t._b({staticClass:"my-text-field",attrs:{dense:"","hide-details":"",value:t.value,readonly:t.readonly},on:{input:t.onInput},scopedSlots:t._u([t.readonly?null:{key:"append",fn:function(){return[e("v-btn",{attrs:{icon:"",small:"",tabindex:"-1"},on:{click:t.open}},[e("v-icon",[t._v("mdi-calendar-today")])],1)]},proxy:!0}],null,!0)},"v-text-field",{...t.$attrs,...i},!1))]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.$attrs.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:"",plain:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-date-picker",{attrs:{"no-title":"","day-format":t.dayFormat},on:{input:t.picker},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("v-text-field",{staticClass:"no-padding",staticStyle:{width:"20px","border-bottom":"none"},attrs:{dense:"","hide-details":"",value:"∽",readonly:t.readonly},on:{input:t.onInput}}),e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({attrs:i}){return[e("v-text-field",t._b({staticClass:"my-text-field",attrs:{dense:"","hide-details":"",value:t.value2,readonly:t.readonly},on:{input:t.onInput2},scopedSlots:t._u([t.readonly?null:{key:"append",fn:function(){return[e("v-btn",{attrs:{icon:"",small:"",tabindex:"-1"},on:{click:t.open2}},[e("v-icon",[t._v("mdi-calendar-today")])],1)]},proxy:!0}],null,!0)},"v-text-field",{...t.$attrs,...i},!1))]}}]),model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.$attrs.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:"",plain:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-date-picker",{attrs:{"no-title":"","day-format":t.dayFormat},on:{input:t.picker2},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1)],1)},s=[],n=(i("64f2"),{name:"InputDateft",model:{prop:"value",event:"input"},model2:{prop:"value2",event:"input2"},props:{value:String,value2:String,readonly:Boolean},data(){return{modal:!1,date:"",modal2:!1,date2:""}},watch:{date2(t){this.$emit("update:value2",t)}},methods:{onInput(t){this.$emit("input",t)},picker(){this.onInput(this.date),this.close()},open(){const t=/^\d{4}-\d{2}-\d{2}$/;this.date=t.test(this.value)?this.value:this.date,this.modal=!0},close(){this.modal=!1,this.modal2=!1},onInput2(t){this.$emit("input2",t)},picker2(){this.onInput2(this.date2),this.close()},open2(){const t=/^\d{4}-\d{2}-\d{2}$/;this.date2=t.test(this.value2)?this.value2:this.date2,this.modal2=!0},dayFormat(t){if(!this.modal&&!this.modal2)return;const e=t.split("-");return Number(e[e.length-1])}}}),l=n,r=i("2877"),o=Object(r["a"])(l,a,s,!1,null,null,null);e["a"]=o.exports}}]);
//# sourceMappingURL=Derliverrate.fb386990.js.map