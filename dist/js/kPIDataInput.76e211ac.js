(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["kPIDataInput"],{"414b":function(t,e,i){"use strict";var l=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:l}){return[e("v-btn",t._g(t._b({class:t.childClass,on:{click:function(e){return t.$emit("click")}}},"v-btn",{...l,...t.$attrs},!1),i),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},s=[],a={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},n=a,o=i("2877"),d=Object(o["a"])(n,l,s,!1,null,null,null);e["a"]=d.exports},b6ce:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("KPI 핵심성과지표 DATA 관리")]),e("v-spacer"),t._v(" 사업장 : "),e("v-select",{staticStyle:{width:"20px","max-width":"100px"},attrs:{"hide-details":"",dense:"",items:t.workSite,"item-text":"n_com","item-value":"c_com"},model:{value:t.form.c_com,callback:function(e){t.$set(t.form,"c_com",e)},expression:"form.c_com"}}),e("tooltip-btn",{attrs:{label:"조회"},on:{click:t.view}},[e("v-icon",[t._v("mdi-magnify")])],1),e("tooltip-btn",{attrs:{label:"추가"},on:{click:t.add}},[e("v-icon",[t._v("mdi-plus")])],1),e("tooltip-btn",{attrs:{label:"삭제"},on:{click:t.del}},[e("v-icon",[t._v("mdi-minus")])],1),e("tooltip-btn",{attrs:{label:"저장"},on:{click:t.save}},[e("v-icon",[t._v("mdi-content-save-outline")])],1)],1),e("v-row",[e("v-col",{attrs:{col:"12",sm:"9",md:"9"}},[e("v-data-table",{ref:"kpi1",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.kpiHead,items:t.kpiData,"item-key":"t_no","single-select":"","hide-default-footer":"","items-per-page":-1,"item-class":t.row_classes,height:t.iframeHeight},scopedSlots:t._u([{key:"item",fn:function({item:i}){return[e("tr",{staticClass:"center-align",class:{row_select:i===t.kpiDataS},on:{click:function(e){return t.selectItem(i)}}},[e("td",{style:{backgroundColor:t.getCellStyle(i,"kpilevel")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{readonly:0==i.f_editold,dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.kpilevel,callback:function(e){t.$set(i,"kpilevel",e)},expression:"item.kpilevel"}})],1),e("td",{style:{backgroundColor:"#ffdda0"}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.ocrDttm,callback:function(e){t.$set(i,"ocrDttm",e)},expression:"item.ocrDttm"}})],1),e("td",{style:{backgroundColor:"#ffdda0"}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.f_tst,callback:function(e){t.$set(i,"f_tst",e)},expression:"item.f_tst"}})],1),e("td",{style:{backgroundColor:"#ffdda0"}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.s_restime,callback:function(e){t.$set(i,"s_restime",e)},expression:"item.s_restime"}})],1),e("td",{style:{backgroundColor:t.getCellStyle(i,"systmOprYn")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.systmOprYn,callback:function(e){t.$set(i,"systmOprYn",e)},expression:"item.systmOprYn"}})],1),e("td",{style:{backgroundColor:t.getCellStyle(i,"kpiFldCd")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.kpiFldCd,callback:function(e){t.$set(i,"kpiFldCd",e)},expression:"item.kpiFldCd"}})],1),e("td",{style:{backgroundColor:t.getCellStyle(i,"kpiDtlCd")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.kpiDtlCd,callback:function(e){t.$set(i,"kpiDtlCd",e)},expression:"item.kpiDtlCd"}})],1),e("td",{style:{backgroundColor:t.getCellStyle(i,"kpiDtlNm")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.kpiDtlNm,callback:function(e){t.$set(i,"kpiDtlNm",e)},expression:"item.kpiDtlNm"}})],1),e("td",{style:{backgroundColor:t.getCellStyle(i,"achrt")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.achrt,callback:function(e){t.$set(i,"achrt",e)},expression:"item.achrt"}})],1),e("td",{style:{backgroundColor:t.getCellStyle(i,"unt")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.unt,callback:function(e){t.$set(i,"unt",e)},expression:"item.unt"}})],1),e("td",{style:{backgroundColor:t.getCellStyle(i,"msmtVl")}},[e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:""},on:{input:function(e){return t.onChange(i)}},model:{value:i.msmtVl,callback:function(e){t.$set(i,"msmtVl",e)},expression:"item.msmtVl"}})],1),e("td",[t._v(" "+t._s(t.getStatue(i)))])])]}}])})],1),e("v-col",{attrs:{col:"12",sm:"3",md:"3"}},[e("v-data-table",{ref:"kpiLevel",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.kpiLevelHead,items:t.kpiLevelLists,"item-key":"lev","single-select":"","hide-default-footer":"","items-per-page":-1,"item-class":t.row_classes,height:"130"},on:{"click:row":t.rowSelectLevel,"dblclick:row":t.SetLevel},model:{value:t.kpiLevelInfos,callback:function(e){t.kpiLevelInfos=e},expression:"kpiLevelInfos"}}),e("v-data-table",{ref:"kpiFldDt",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.KpiFldDtHead,items:t.KpiFldDtLists,"item-key":"c_gccode","single-select":"","hide-default-footer":"","items-per-page":-1,"item-class":t.row_classes,height:t.iframeHeight-130},on:{"click:row":t.rowSelectFldDt,"dblclick:row":t.SetFildDt},model:{value:t.kpiFldtDtInfos,callback:function(e){t.kpiFldtDtInfos=e},expression:"kpiFldtDtInfos"}})],1)],1)],1)},s=[],a=(i("14d9"),i("414b")),n=i("f3db"),o={components:{TooltipBtn:a["a"],InputDate2:n["a"]},mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.init()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},create(){},data(){return{iframeHeight:500,form:{c_com:"",s_ym:"",f_tst:"Y"},workSite:[],setCom:{c_com:"",n_com:"",i_kpikey:"",s_day:"",ocrDttm:""},kpiHead:[{text:"KPI Level",value:"kpilevel",sortable:!1,align:"center",width:"100px"},{text:"날자",value:"ocrDttm",sortable:!1,align:"center",width:"80px"},{text:"TEST",value:"f_tst",sortable:!1,align:"center",width:"20px"},{text:"예약시간",value:"s_restime",sortable:!1,align:"center",width:"50px"},{text:"가동",value:"systmOprYn",sortable:!1,align:"center",width:"40px"},{text:"성과코드",value:"kpiFldCd",sortable:!1,align:"center",width:"50px"},{text:"지표코드",value:"kpiDtlCd",sortable:!1,align:"center",width:"50px"},{text:"성과지표",value:"kpiDtlNm",sortable:!1,align:"center",width:"200px"},{text:"성치율",value:"achrt",sortable:!1,align:"center",width:"50px"},{text:"단위",value:"unt",sortable:!1,align:"center",width:"50px"},{text:"수치",value:"msmtVl",sortable:!1,align:"center",width:"50px"},{text:"상태",value:"f_edit",sortable:!1,align:"center",width:"50px"}],kpiData:[],kpiDataS:[],kpiLevlel:["KPILEVEL1","KPILEVEL2","KPILEVEL3"],kpiFldCds:[{CD:"P",NM:"생산"},{CD:"C",NM:"원가"},{CD:"Q",NM:"품질"},{CD:"D",NM:"납기"}],kpiDtlCds:[],kpiDtlCd:[],KpiFldDtHead:[{text:"성과",value:"kpiFldNm",sortable:!1,align:"center",width:"80px"},{text:"성과지표",value:"kpiDtlNm",sortable:!1,align:"left",width:"150px"},{text:"단위",value:"unt",sortable:!1,align:"center",width:"50px"}],KpiFldDtLists:[],kpiFldtDtInfo:[],kpiFldtDtInfos:[],kpiLevelHead:[{text:"LEVEL",value:"lev",sortable:!1,align:"center",width:"50px"},{text:"시간",value:"t_time",sortable:!1,align:"center",width:"50px"}],kpiLevelLists:[],kpiLevelInfo:[],kpiLevelInfos:[]}},computed:{kpic_com(){const t=this.workSite.findIndex(t=>t.c_com==this.form.c_com);if(t>=0)return this.workSite[t].c_com},kpiCom(){const t=this.workSite.findIndex(t=>t.c_com==this.form.c_com);if(t>=0)return this.workSite[t].n_kpiconm},kpiKey(){const t=this.workSite.findIndex(t=>t.c_com==this.form.c_com);if(t>=0)return this.workSite[t].i_kpikey}},methods:{adjustIframeHeight(){const t=window.innerHeight;this.iframeHeight=t-200},row_classes(t){if("2"==t.f_edit)return"orange"},getCellBackgroundColor(t){return"KPILEVEL1"===t.kpilevel?"#fce4d6":"KPILEVEL2"===t.kpilevel?"#fce4c0":"KPILEVEL3"===t.kpilevel?"#99ff00":"transparent"},getCellStyle(t,e){return"KPILEVEL1"!==t.kpilevel||"kpilevel"!=e&&"systmOprYn"!=e?"KPILEVEL2"!==t.kpilevel||"kpilevel"!=e&&"kpiFldCd"!=e&&"kpiDtlCd"!=e&&"kpiDtlNm"!=e&&"achrt"!=e?"KPILEVEL3"!==t.kpilevel||"kpilevel"!=e&&"kpiFldCd"!=e&&"kpiDtlCd"!=e&&"kpiDtlNm"!=e&&"msmtVl"!=e&&"unt"!=e?"transparent":"#99ff00":"#b4c6e7":"#fce4d6"},getStatue(t){let e="";return e="2"==t.f_edit?"삭제":"1"==t.f_editold?"추가":"1"==t.f_edit?"수정":"",e},async init(){this.workSite=await this.$axios.post("/api/kpi/getWorksite"),this.kpiDtlCds=await this.$axios.post("/api/kpi/getKpiFild"),this.KpiFldDtLists=await this.$axios.post("/api/kpi/kpiFldDtlist"),this.kpiDtlCd=this.kpiDtlCds.filter((function(t){return"KPIP"==t.c_gcode}))},async view(){this.kpiKey?(this.setCom.c_com=this.kpic_com,this.setCom.n_com=this.kpiCom,this.setCom.i_kpikey=this.kpiKey,this.kpiLevelLists=await this.$axios.post("/api/kpi/kpiLevellist",this.setCom),this.kpiData=await this.$axios.post("/api/kpi/kpiJoblist",this.setCom)):this.$toast.warning("인증키값이 없습니다.")},async add(){if(!this.kpiKey)return void this.$toast.warning("인증키값이 없습니다.");const t={};t.kpilevel=this.kpiLevelInfo.lev,t.t_no="",t.c_com=this.setCom.c_com,t.kpiCertKey=this.setCom.i_kpikey,t.ocrDttm="",t.s_restime=this.kpiLevelInfo.t_time,t.systmOprYn="KPILEVEL1"==this.kpiLevelInfo.lev?"Y":"",t.kpiFldCd="KPILEVEL1"==this.kpiLevelInfo.lev?this.kpiFldtDtInfo.kpiFldCd:"",t.kpiDtlCd="KPILEVEL1"==this.kpiLevelInfo.lev?this.kpiFldtDtInfo.kpiDtlCd:"",t.kpiDtlNm="KPILEVEL1"==this.kpiLevelInfo.lev?this.kpiFldtDtInfo.kpiDtlNm:"",t.achrt="",t.msmtVl="",t.unt="KPILEVEL3"==this.kpiLevelInfo.lev?this.kpiFldtDtInfo.unt:"",t.trsDttm="",t.f_tst="Y",t.t_req="",t.t_res="",t.f_err="-",t.f_edit="1",t.f_editold="1";this.kpiData.push(t)},async del(){if("undefined"==this.kpiDataS.f_edit)return;const t=this.kpiData.indexOf(this.kpiDataS);t>=0&&("1"==this.kpiDataS.f_editold?this.kpiData.splice(t,1):this.kpiData[t].f_edit="2"==this.kpiData[t].f_edit?"1":"2")},async save(){const t=this.kpiData.filter(t=>"0"!==t.f_edit);t.forEach(t=>{});const e=await this.$axios.post("/api/kpi/iukpiJoblist",t);e&&t.forEach((t,e)=>{const i=this.kpiData.indexOf(t);i>=0&&("2"==t.f_edit?this.kpiData.splice(i,1):(this.kpiData[i].f_edit="0",this.kpiData[i].f_editold="0"))})},onChange(t){t.f_edit="1"},onChangeFldCd(t){this.kpiDtlCd=this.kpiDtlCds.filter((function(e){return e.c_gcode=="KPI"+t}))},async selectItem(t){this.kpiDataS!=t&&(this.kpiDataS=t)},rowSelectLevel:function(t,e){e.select(!0),this.kpiLevelInfo=t},rowSelectFldDt:function(t,e){e.select(!0),this.kpiFldtDtInfo=t},async SetLevel(t,{item:e}){this.kpiDataS.c_com&&(this.kpiDataS.kpilevel=e.lev,this.kpiDataS.systmOprYn="Y",this.kpiDataS.s_restime=e.t_time)},async SetFildDt(t,{item:e}){this.kpiDataS.c_com&&"KPILEVEL1"!=this.kpiDataS.kpilevel&&("KPILEVEL2"==this.kpiDataS.kpilevel?(this.kpiDataS.kpiFldCd=e.kpiFldCd,this.kpiDataS.kpiDtlCd=e.kpiDtlCd,this.kpiDataS.kpiDtlNm=e.kpiDtlNm,this.kpiDataS.achrt="",this.kpiDataS.unt="",this.kpiDataS.msmtVl=""):"KPILEVEL3"==this.kpiDataS.kpilevel&&(this.kpiDataS.kpiFldCd=e.kpiFldCd,this.kpiDataS.kpiDtlCd=e.kpiDtlCd,this.kpiDataS.kpiDtlNm=e.kpiDtlNm,this.kpiDataS.achrt="",this.kpiDataS.unt=e.unt,this.kpiDataS.msmtVl=""),this.kpiDataS.systmOprYn="",this.kpiDataS.f_edit="1")}}},d=o,r=i("2877"),p=Object(r["a"])(d,l,s,!1,null,null,null);e["default"]=p.exports},f3db:function(t,e,i){"use strict";var l=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({attrs:i}){return[e("v-text-field",t._b({staticClass:"my-text-table my-text-field",attrs:{dense:"","hide-details":"",value:t.value,readonly:t.readonly},on:{input:t.onInput},scopedSlots:t._u([t.readonly?null:{key:"append",fn:function(){return[e("v-btn",{attrs:{icon:"",small:"",tabindex:"-1"},on:{click:t.open}},[e("v-icon",[t._v("mdi-calendar-today")])],1)]},proxy:!0}],null,!0)},"v-text-field",{...t.$attrs,...i},!1))]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.$attrs.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:"",plain:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-date-picker",{attrs:{"no-title":"","day-format":t.dayFormat},on:{input:t.picker},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)},s=[],a={name:"InputDate2",model:{prop:"value",event:"input"},props:{value:String,readonly:Boolean},data(){return{modal:!1,date:""}},methods:{onInput(t){this.$emit("input",t)},open(){const t=/^\d{4}-\d{2}-\d{2}$/;this.date=t.test(this.value)?this.value:this.date,this.modal=!0},close(){this.modal=!1,this.modal2=!1},picker(){this.onInput(this.date),this.close()},dayFormat(t){if(!this.modal)return;const e=t.split("-");return Number(e[e.length-1])}}},n=a,o=i("2877"),d=Object(o["a"])(n,l,s,!1,null,null,null);e["a"]=d.exports}}]);
//# sourceMappingURL=kPIDataInput.76e211ac.js.map