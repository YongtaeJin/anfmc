(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Basejobprtype"],{"414b":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("v-btn",t._g(t._b({class:t.childClass,on:{click:function(e){return t.$emit("click")}}},"v-btn",{...i,...t.$attrs},!1),s),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},o=[],a={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},r=a,l=s("2877"),c=Object(l["a"])(r,i,o,!1,null,null,null);e["a"]=c.exports},a2e4:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("v-dialog",t._b({model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},"v-dialog",t.$attrs,!1),[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.label))]),e("v-spacer"),t.obtn?e("v-btn",{attrs:{color:"primary",small:""},on:{click:t.btnClick}},[t._v(" "+t._s(t.obtn)+" ")]):t._e(),e("v-btn",{attrs:{icon:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[t._t("default")],2)],1)],1)},o=[],a={name:"ezDialog",props:{label:{type:String,required:!0},obtn:{type:String}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1,this.$emit("onClose")},open(){this.$emit("onOpen"),this.dialog=!0},btnClick(){this.dialog=!1,this.$emit("btnClick")}}},r=a,l=s("2877"),c=Object(l["a"])(r,i,o,!1,null,null,null);e["a"]=c.exports},d749:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("공정유형 관리")]),e("v-spacer"),e("v-text-field",{attrs:{ense:"","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("tooltip-btn",{attrs:{label:"조회"},on:{click:t.fatch}},[e("v-icon",[t._v("mdi-magnify")])],1),e("tooltip-btn",{attrs:{label:"추가"},on:{click:t.addPTypeItem}},[e("v-icon",[t._v("mdi-plus")])],1),e("tooltip-btn",{attrs:{label:"삭제"},on:{click:t.delPTypeItem}},[e("v-icon",[t._v("mdi-minus")])],1)],1),e("v-row",[e("v-col",{attrs:{col:"12",sm:"5",md:"5"}},[e("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.headers,items:t.progresstype,"item-key":"c_ptype","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:t.iframeHeight},on:{"click:row":t.rowSelect,"dblclick:row":t.showRowInfo},scopedSlots:t._u([{key:"item.f_use",fn:function({item:s}){return[e("v-chip",{attrs:{"x-small":"",color:t.getColor(s.f_use),dark:""}},[t._v(" "+t._s("Y"==s.f_use?"사용":"중지")+" ")])]}}],null,!0)})],1),e("v-col",{attrs:{col:"12",sm:"7",md:"7"}},[e("v-toolbar",{attrs:{height:"40px","background-color":"primary"}},[e("v-toolbar-title",[t._v(t._s(t.typeTitle))]),e("v-spacer"),e("tooltip-btn",{attrs:{label:"추가",fab:"","x-small":""},on:{click:t.addDetail}},[e("v-icon",[t._v("mdi-plus")])],1),e("tooltip-btn",{attrs:{label:"삭제",fab:"","x-small":""},on:{click:t.delDetail}},[e("v-icon",[t._v("mdi-minus")])],1)],1),e("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.headersDT,items:t.progresstypeli,"item-key":"c_id","single-select":"","items-per-page":20,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:t.iframeHeight-40},on:{"click:row":t.rowSelectLI,"dblclick:row":t.showRowInfoLI},scopedSlots:t._u([{key:"item.f_jobs",fn:function({item:s}){return["Y"==s.f_jobs?e("v-icon",{attrs:{small:"",color:t.getColor(s.f_jobs)}},[t._v(" mdi-check ")]):t._e()]}},{key:"item.f_jobf",fn:function({item:s}){return["Y"==s.f_jobf?e("v-icon",{attrs:{small:"",color:t.getColor(s.f_jobf)}},[t._v(" mdi-check ")]):t._e()]}},{key:"item.f_jobo",fn:function({item:s}){return["Y"==s.f_jobo?e("v-icon",{attrs:{small:"",color:t.getColor(s.f_jobo)}},[t._v(" mdi-check ")]):t._e()]}}],null,!0)})],1)],1),e("ez-dialog",{ref:"dialog",attrs:{label:"공정유형 등록(수정)",persistent:"",width:"500px"},on:{onClose:t.close}},[e("basejobprtype-from",{attrs:{data:t.typeitem,keyCheckItem:t.keyCheckItem,isLoad:t.isLoad,s_sort:t.getMaxNo},on:{onSave:t.saveType}})],1),e("ez-dialog",{ref:"dialogLi",attrs:{label:"공정추가/삭제",persistent:"",width:"460px"},on:{onClose:t.closeLi}},[e("basejobprtypeli-from",{attrs:{data:t.typeliitem,keyCheckItem:t.keyCheckItemLi,isLoad:t.isLoad,c_ptype:t.c_ptype,s_sort:t.getMaxNo2,proclist:t.proclist},on:{onSave:t.saveLiType}})],1)],1)},o=[],a=(s("14d9"),s("4328")),r=s.n(a),l=s("2f62"),c=s("a2e4"),n=s("414b"),p=function(){var t=this,e=t._self._c;return e("v-container",{staticClass:"grey lighten-5"},[e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-row",[e("v-col",{attrs:{col:"12",sm:"2",md:"2"}},[e("v-text-field",{attrs:{label:"No",rules:[t.rules.Num()],"hide-details":"false"},model:{value:t.form.s_sort,callback:function(e){t.$set(t.form,"s_sort",e)},expression:"form.s_sort"}})],1),e("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[e("input-duplicate-check",{ref:"c_ptype",attrs:{label:"공정유형코드",cbCheck:t.keyCheckItem,origin:t.originKeyId,readonly:!!t.data,rules:[t.rules.require({label:"공정유형코드"}),t.rules.alphaNum()]},model:{value:t.form.c_ptype,callback:function(e){t.$set(t.form,"c_ptype",e)},expression:"form.c_ptype"}})],1),e("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[e("v-checkbox",{attrs:{label:"사용","true-value":"Y","false-value":"N","hide-details":"false"},model:{value:t.form.f_use,callback:function(e){t.$set(t.form,"f_use",e)},expression:"form.f_use"}})],1),e("v-col",{attrs:{col:"12",sm:"8",md:"8"}},[e("v-text-field",{attrs:{label:"공정유형 명","hide-details":"false"},model:{value:t.form.n_ptype,callback:function(e){t.$set(t.form,"n_ptype",e)},expression:"form.n_ptype"}})],1),e("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[e("v-text-field",{attrs:{label:"설명","hide-details":"false"},model:{value:t.form.t_remark,callback:function(e){t.$set(t.form,"t_remark",e)},expression:"form.t_remark"}})],1)],1),e("v-row",[e("v-col")],1),e("v-btn",{attrs:{type:"submit",color:"primary",block:""}},[t._v("저장")])],1)],1)},h=[],u=s("64f2"),d=s("248f"),f=s.n(d),m=s("50d8"),y=s("f075"),_={components:{InputRadio:y["a"],InputDuplicateCheck:m["a"]},name:"BasejobprocesstypeForm",props:{data:{type:Object,default:null},keyCheckItem:{type:Function,default:null},isLoad:{type:Boolean,default:null},s_sort:{type:Number,default:0}},data(){return{valid:!0,form:{c_com:"",c_ptype:"",s_sort:0,n_ptype:"",f_use:"Y",t_remark:""},YesorNo:[{label:"사용",value:"Y"},{label:"중지",value:"N"}]}},created(){this.init()},watch:{data(){this.fatch()},isLoad(){this.fatch()}},computed:{rules:()=>f.a,originKeyId(){return this.data?this.data.c_ptype:""}},methods:{async init(){this.fatch()},async fatch(){this.data?this.form=Object(u["deepCopy"])(this.data):this.form={c_com:this.$store.state.user.member.c_com,c_ptype:"",s_sort:1+(0|this.s_sort),n_ptype:"",f_use:"Y",t_remark:""},this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.c_ptype.init())},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&this.$refs.c_ptype.validate()&&(this.$emit("onSave",this.form),this.init())}}},v=_,b=s("2877"),g=Object(b["a"])(v,p,h,!1,null,null,null),k=g.exports,x=function(){var t=this,e=t._self._c;return e("v-container",{staticClass:"grey lighten-5"},[e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-row",[e("v-col",{attrs:{col:"12",sm:"2",md:"2"}},[e("v-text-field",{attrs:{label:"No",rules:[t.rules.Num()],"hide-details":"false"},model:{value:t.form.s_sort,callback:function(e){t.$set(t.form,"s_sort",e)},expression:"form.s_sort"}})],1),e("v-spacer"),e("v-col",{attrs:{col:"12",sm:"3",md:"3"}},[e("v-text-field",{attrs:{label:"작업시간",rules:[t.rules.Num()],"hide-details":"false",readonly:""},model:{value:t.form.m_whour,callback:function(e){t.$set(t.form,"m_whour",e)},expression:"form.m_whour"}})],1),e("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[e("v-select",{attrs:{label:"공정코드",items:t.proclist,"item-text":"n_process","item-value":"c_process",rules:[t.rules.require({label:"공정코드"})]},on:{change:t.setSelect},scopedSlots:t._u([{key:"item",fn:function({item:e}){return[t._v(t._s(t.getText(e)))]}},{key:"selection",fn:function({item:e}){return[t._v(t._s(t.getText(e)))]}}]),model:{value:t.form.c_process,callback:function(e){t.$set(t.form,"c_process",e)},expression:"form.c_process"}})],1),e("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[e("v-checkbox",{attrs:{label:"첫공정","true-value":"Y","false-value":"N","hide-details":"false"},model:{value:t.form.f_jobs,callback:function(e){t.$set(t.form,"f_jobs",e)},expression:"form.f_jobs"}})],1),e("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[e("v-checkbox",{attrs:{label:"마지막공정","true-value":"Y","false-value":"N","hide-details":"false"},model:{value:t.form.f_jobf,callback:function(e){t.$set(t.form,"f_jobf",e)},expression:"form.f_jobf"}})],1),e("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[e("v-checkbox",{attrs:{label:"외주공정","true-value":"Y","false-value":"N","hide-details":"false"},model:{value:t.form.f_jobo,callback:function(e){t.$set(t.form,"f_jobo",e)},expression:"form.f_jobo"}})],1)],1),e("v-row",[e("v-col")],1),e("v-btn",{attrs:{type:"submit",color:"primary",block:""}},[t._v("저장")])],1)],1)},$=[],w=function(){var t=this,e=t._self._c;return e("v-text-field",t._b({ref:"field",attrs:{value:t.value,maxlength:t.$attrs.counter,"error-messages":t.errMsg,"success-messages":t.successMsg},on:{input:t.onInput},scopedSlots:t._u([t.isCheck?null:{key:"append",fn:function(){return[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("v-btn",t._g(t._b({attrs:{icon:"",small:"",tabindex:"-1",loading:t.loading},on:{click:t.check}},"v-btn",i,!1),s),[e("v-icon",[t._v("mdi-check")])],1)]}}],null,!1,1344435932)},[t._v(" "+t._s(t.$attrs.label)+" 중복검사 ")])]},proxy:!0}],null,!0)},"v-text-field",t.$attrs,!1))},C=[],j={name:"InputDuplicateTwoColCheck",model:{prop:"value",event:"input"},props:{value:String,cbCheck:{type:Function,default:null},origin:{type:String,default:""},value1:{type:String,default:""}},watch:{origin(){this.isCheck=!!this.origin||!this.cbCheck}},data(){return{isCheck:!!this.origin||!this.cbCheck,loading:!1,errMsg:"",successMsg:""}},computed:{isSend(){return!!this.cbCheck&&0===this.$refs.field.errorBucket.length}},mounted(){},methods:{onInput(t){this.isCheck=this.origin?this.origin===t:!this.cbCheck,this.errMsg="",this.successMsg="",this.$emit("input",t)},init(){this.errMsg="",this.successMsg=""},async check(){if(!this.isSend)return;this.loading=!0,this.errMsg="",this.successMsg="";const t=await this.cbCheck(this.value1,this.value);this.value?0==t.cnt?(this.successMsg=`사용 가능한 ${this.$attrs.label} 입니다.`,this.isCheck=!0):(this.errMsg=`중복된 ${this.$attrs.label} 입니다.`,this.isCheck=!1):this.successMsg="",this.loading=!1},validate(){return this.isCheck||(this.errMsg=this.$attrs.label+" 중복검사를 해주세요.",this.$refs.field.focus()),this.isCheck}}},L=j,I=Object(b["a"])(L,w,C,!1,null,null,null),S=I.exports,N={components:{InputRadio:y["a"],InputDuplicateTwoColCheck:S},name:"BasejobprocesstypeliForm",props:{data:{type:Object,default:null},keyCheckItem:{type:Function,default:null},isLoad:{type:Boolean,default:null},c_ptype:{type:String,default:null},s_sort:{type:Number,default:0},proclist:{type:Array,default:null}},data(){return{valid:!0,form:{c_com:"",c_ptype:"",s_sort:0,c_process:"",n_process:"",m_whour:1,f_jobs:"Y",f_jobf:"N",f_jobo:"N"}}},created(){this.init()},watch:{data(){this.fatch()},isLoad(){this.fatch()}},computed:{rules:()=>f.a,originKeyId(){return this.data?this.data.c_process:""}},methods:{async init(){this.fatch()},async fatch(){this.data?this.form=Object(u["deepCopy"])(this.data):this.form={c_com:this.$store.state.user.member.c_com,c_ptype:this.c_ptype,s_sort:1+(0|this.s_sort),c_process:"",n_process:"",m_whour:1,f_jobs:"Y",f_jobf:"N",f_jobo:"N"},this.$refs.form&&this.$refs.form.resetValidation()},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&(this.$emit("onSave",this.form),this.init())},getText(t){return t.c_process+" - "+t.n_process},setSelect(t){this.form.n_process=this.proclist.find(e=>e.c_process===t).n_process}}},T=N,M=Object(b["a"])(T,x,$,!1,null,null,null),P=M.exports,O={components:{TooltipBtn:n["a"],EzDialog:c["a"],BasejobprtypeFrom:k,BasejobprtypeliFrom:P},name:"BasejobProcesstype",mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.init()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},data(){return{iframeHeight:500,headers:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"35px"},{text:"공정유형코드",value:"c_ptype",sortable:!1,align:"center"},{text:"공정유형명",value:"n_ptype",sortable:!1,align:"left"},{text:"사용",value:"f_use",sortable:!1,align:"center"}],progresstype:[],typeitem:[],search:"",isLoad:!1,typeTitle:"Code",c_ptype:"",headersDT:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"35px"},{text:"공정코드",value:"c_process",sortable:!1,align:"center"},{text:"공정명",value:"n_process",sortable:!1,align:"left"},{text:"작업시간",value:"m_whour",sortable:!1,align:"center",width:"70px"},{text:"첫공정",value:"f_jobs",sortable:!1,align:"center",width:"70px"},{text:"마지막공정",value:"f_jobf",sortable:!1,align:"center",width:"70px"},{text:"외주",value:"f_jobo",sortable:!1,align:"center",width:"70px"}],progresstypelis:[],progresstypeli:[],typeliitem:[],proclists:[],proclist:[]}},watch:{},computed:{ptypeDiplay(){return this.typeitem.c_ptype?"Code : "+this.typeitem.c_ptype+"/"+this.typeitem.n_ptype:"Code"},getMaxNo(){const t=Math.max(...this.progresstype.map(t=>t.s_sort));return isFinite(t)?t:0},getMaxNo2(){const t=Math.max(...this.progresstypeli.map(t=>t.s_sort));return isFinite(t)?t:0}},methods:{...Object(l["b"])("basejob",["duplicateProcesstypeCheck","iuBaseProcesstype","duplicateProcesstypeCheckLi","iuBaseProcesstypeLi"]),adjustIframeHeight(){const t=window.innerHeight;this.iframeHeight=t-200},async init(){this.fatch()},async fatch(){const t={search:this.search.trim()},e=r.a.stringify(t);this.progresstype&&this.progresstype.splice(0),this.progresstypelis&&this.progresstypelis.splice(0),this.progresstype=await this.$axios.get("/api/basejob/getBaseProcesstype?"+e),this.progresstypelis=await this.$axios.get("/api/basejob/getBaseProcesstypeLi"),this.proclists=await this.$axios.get("/api/basejob/getProcessItem")},async addPTypeItem(){this.isLoad=!0,this.typeitem=null,this.$refs.dialog.open()},async delPTypeItem(){if(this.getMaxNo2)return void this.$toast.info("공정 List 삭제 후 삭제 가능 합니다.");const t=this.progresstype.indexOf(this.typeitem);if(t<0)return;const e=await this.$ezNotify.confirm(`<b>공정유형 코드 : ${this.typeitem.c_ptype}</b> 삭제 하시겠습니까 ?`,"공정유형",{icon:"mdi-delete",iconColor:"red"});if(!e)return;const s=await this.$axios.delete(`/api/basejob/delBaseProcesstype/${this.typeitem.c_com}/${this.typeitem.c_ptype}`);s&&(this.progresstype.splice(t,1),this.$toast.info(`[${this.typeitem.c_ptype}] 삭제 하였습니다.`))},getColor(t){return"N"==t?"red":"green"},getColor2(t){return"Y"==t?"red":"green"},rowSelect:function(t,e){e.select(!0),this.typeitem=t,this.c_ptype=this.typeitem.c_ptype,this.typeTitle=this.typeitem.c_ptype?"Code : "+this.typeitem.c_ptype+"/"+this.typeitem.n_ptype:"Code",this.progresstypeli=this.progresstypelis.filter(t=>t.c_ptype==this.typeitem.c_ptype&&t.c_com==this.typeitem.c_com),this.notProcSeletc()},notProcSeletc(){s("c46f");this.proclist=JSON.parse(JSON.stringify(this.proclists)),this.progresstypeli.forEach(t=>{const e=this.proclist.findIndex(e=>e.c_process==t.c_process);e>-1&&this.proclist.splice(e,1)})},async keyCheckItem(t){const e={c_ptype:"c_ptype",value:t};return await this.duplicateProcesstypeCheck(e)},async showRowInfo(t,{item:e}){this.isLoad=!0,this.typeitem=e,this.$refs.dialog.open()},async saveType(t){this.isLoading=!0;const e=await this.iuBaseProcesstype(t);if(this.isLoading=!1,e){this.$toast.info(`[${e.c_ptype}] 저장 하였습니다.`);const t=this.progresstype.indexOf(this.typeitem);t>=0?this.progresstype.splice(t,1,e):this.progresstype.push(e)}this.$refs.dialog.close()},async close(){this.isLoad=!1},async addDetail(){this.typeitem&&this.typeitem.c_ptype&&(this.isLoad=!0,this.typeliitem=null,this.$refs.dialogLi.open())},async delDetail(){const t=this.progresstypeli.indexOf(this.typeliitem);if(t<0)return;const e=await this.$ezNotify.confirm(`<b>공정 코드 : ${this.typeliitem.c_process}</b> 삭제 하시겠습니까 ?`,"공정유형_공정코드",{icon:"mdi-delete",iconColor:"red"});if(!e)return;const s=await this.$axios.delete(`/api/basejob/delBaseProcesstypeLi/${this.typeliitem.c_com}/${this.typeliitem.c_ptype}/${this.typeliitem.c_process}`);s&&(this.progresstypeli.splice(t,1),this.$toast.info(`[${this.typeliitem.c_process}] 삭제 하였습니다.`))},rowSelectLI:function(t,e){e.select(!0),this.typeliitem=t},async showRowInfoLI(t,{item:e}){this.isLoad=!0,this.typeliitem=e,this.$refs.dialogLi.open()},async saveLiType(t){this.isLoading=!0;const e=await this.iuBaseProcesstypeLi(t);if(this.isLoading=!1,e){this.$toast.info(`[${e.c_ptype}] 저장 하였습니다.`);const t=this.progresstypeli.indexOf(this.typeliitem);t>=0?this.progresstypeli.splice(t,1,e):this.progresstypeli.push(e);const s=this.progresstypelis.indexOf(this.typeliitem);s>=0?this.progresstypelis.splice(s,1,e):this.progresstypelis.push(e),this.notProcSeletc()}this.$refs.dialogLi.close()},async closeLi(){this.isLoad=!1},async keyCheckItemLi(t,e){const s={c_col1:"c_ptype",value1:t,c_col2:"c_process",value:e};return await this.duplicateProcesstypeCheckLi(s)}}},B=O,D=Object(b["a"])(B,i,o,!1,null,null,null);e["default"]=D.exports}}]);
//# sourceMappingURL=Basejobprtype.7fa31fe8.js.map