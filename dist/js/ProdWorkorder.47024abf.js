(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProdWorkorder"],{1:function(t,e){},"121b":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-text-field",t._b({staticClass:"my-text-field inputNumber text-xs-right no-padding",attrs:{value:t.value,type:"number",maxlength:"3","hide-details":"",dense:"","single-line":"",oninput:"javascript: this.value = this.value.replace(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/g, '' );"},on:{input:t.onInput}},"v-text-field",t.$attrs,!1))},n=[],l={props:{value:0,maxlength:{type:Number,default:15}},methods:{onInput(t){String(t).length>this.maxlength&&(t=t.slice(0,this.maxlength)),this.$emit("input",t)}}},s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports},"12e3":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return l})),i.d(e,"b",(function(){return s}));const a=[{label:"작성",value:"I"},{label:"제출",value:"S"},{label:"확정",value:"A"}],n=[{label:"작성",value:"I"},{label:"등록",value:"S"},{label:"계획",value:"P"},{label:"작업",value:"W"},{label:"출하",value:"D"},{label:"결재",value:"A"}],l=[{label:"수주",value:"1"},{label:"지시",value:"2"},{label:"작업",value:"3"},{label:"완료",value:"4"},{label:"출고",value:"5"},{label:"요청",value:"6"},{label:"입금",value:"7"}],s=[{label:"작성",value:"0"},{label:"확정",value:"1"},{label:"입금",value:"2"},{label:"완료",value:"9"}]},"1c76":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-text-field",t._b({staticClass:"my-text-field inputPrice text-xs-right no-padding",attrs:{value:t.value,type:"number",maxlength:"3","hide-details":"",dense:"","single-line":"",oninput:"javascript: this.value = this.value.replace(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/g, '' );"},on:{input:t.onInput}},"v-text-field",t.$attrs,!1))},n=[],l={props:{value:0,maxlength:{type:Number,default:15}},methods:{onInput(t){String(t).length>this.maxlength&&(t=t.slice(0,this.maxlength)),this.$emit("input",t)}}},s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports},2:function(t,e){},"414b":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:a}){return[e("v-btn",t._g(t._b({class:t.childClass,on:{click:function(e){return t.$emit("click")}}},"v-btn",{...a,...t.$attrs},!1),i),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},n=[],l={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports},"6b39":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({attrs:i}){return[e("v-text-field",t._b({staticClass:"my-text-field my-text-field",attrs:{dense:"","hide-details":"",value:t.value,readonly:t.readonly},on:{input:t.onInput},scopedSlots:t._u([t.readonly?null:{key:"append",fn:function(){return[e("v-btn",{attrs:{icon:"",small:"",tabindex:"-1"},on:{click:t.open}},[e("v-icon",[t._v("mdi-calendar-today")])],1)]},proxy:!0}],null,!0)},"v-text-field",{...t.$attrs,...i},!1))]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.$attrs.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:"",plain:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-date-picker",{attrs:{"no-title":"","day-format":t.dayFormat},on:{input:t.picker},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)},n=[],l={name:"InputDate2",model:{prop:"value",event:"input"},props:{value:String,readonly:Boolean},data(){return{modal:!1,date:""}},methods:{onInput(t){this.$emit("input",t)},open(){const t=/^\d{4}-\d{2}-\d{2}$/;this.date=t.test(this.value)?this.value:this.date,this.modal=!0},close(){this.modal=!1,this.modal2=!1},picker(){this.onInput(this.date),this.close()},dayFormat(t){if(!this.modal)return;const e=t.split("-");return Number(e[e.length-1])}}},s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports},a2e4:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-dialog",t._b({model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},"v-dialog",t.$attrs,!1),[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.label))]),e("v-spacer"),t.obtn?e("v-btn",{attrs:{color:"primary",small:""},on:{click:t.btnClick}},[t._v(" "+t._s(t.obtn)+" ")]):t._e(),e("v-btn",{attrs:{icon:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[t._t("default")],2)],1)],1)},n=[],l={name:"ezDialog",props:{label:{type:String,required:!0},obtn:{type:String}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1,this.$emit("onClose")},open(){this.$emit("onOpen"),this.dialog=!0},btnClick(){this.dialog=!1,this.$emit("btnClick")}}},s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports},cc8d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("작업 지시")]),e("v-spacer"),e("tooltip-btn",{attrs:{label:"조회"},on:{click:t.view}},[e("v-icon",[t._v("mdi-magnify")])],1),e("tooltip-btn",{attrs:{label:"저장"},on:{click:t.save}},[e("v-icon",[t._v("mdi-content-save-outline")])],1)],1),e("v-card",{staticClass:"my-card text-input-blue my-text-fontsize",staticStyle:{display:"flex",height:"34px"}},[e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"70px"}},[e("v-text-field",{staticClass:"no-padding",attrs:{value:"  납품예정일 : ",readonly:"",dense:"","hide-details":""}})],1),e("input-dateft",{attrs:{value2:t.form.sDate2},on:{"update:value2":function(e){return t.$set(t.form,"sDate2",e)}},model:{value:t.form.sDate1,callback:function(e){t.$set(t.form,"sDate1",e)},expression:"form.sDate1"}}),e("div",{staticStyle:{width:"56px"}},[e("v-text-field",{staticClass:"no-padding",attrs:{value:"    발주처 : ",readonly:"",dense:"","hide-details":""}})],1),e("div",{staticStyle:{width:"100px"}},[e("v-text-field",{staticClass:"text-input-blue no-padding",attrs:{dense:"","hide-detail":""},model:{value:t.form.sVend,callback:function(e){t.$set(t.form,"sVend",e)},expression:"form.sVend"}})],1)],1)]),e("v-data-table",{ref:"data-table",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.itemHead,items:t.itemList,"item-key":"i_orderser","single-select":"","item-class":t.row_classes,"items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},"max-height":"350px",height:"350px"},scopedSlots:t._u([{key:"header",fn:function(){return[e("thead",{attrs:{align:"center"}},[e("tr",[e("th",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("수주정보")]),e("th",{staticClass:"text-center",attrs:{colspan:"5"}},[t._v("제품정보")]),e("th",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("생산계획")])])])]},proxy:!0},{key:"item",fn:function({item:i,index:a}){return[t.shouldMergeRow(i)?e("tr",{staticClass:"center-align",class:{row_select:i===t.selected},on:{click:function(e){return t.selectItem(i)}}},[e("td",[t._v(" "+t._s(a+1))]),e("td",{attrs:{rowspan:t.getRowspan(i)}},[t._v(t._s(i.i_orderno))]),e("td",{attrs:{rowspan:t.getRowspan(i)}},[t._v(t._s(i.s_date))]),e("td",{attrs:{rowspan:t.getRowspan(i)}},[t._v(t._s(i.n_vend))]),e("td",{staticClass:"left-align"},[t._v(" "+t._s(i.n_item))]),e("td",{staticClass:"left-align"},[t._v(" "+t._s(i.t_size))]),e("td",[t._v(" "+t._s(i.i_unit))]),e("td",[t._v(" "+t._s(i.m_cnt))]),e("td",[t._v(" "+t._s(i.s_duedate))]),"1"==i.f_work||"2"==i.f_work?e("td",{on:{dblclick:function(e){return t.setWork(i)}}},[e("v-chip",{attrs:{"x-small":"",color:t.getColor(i.f_work),dark:""}},[t._v(t._s(t.getStatus(i.f_work)))])],1):e("td",{attrs:{align:"center"}},[e("v-chip",{attrs:{"x-small":"",color:t.getColor(i.f_work),dark:""}},[t._v(t._s(t.getStatus(i.f_work)))])],1),"x"==i.f_work?e("td",{on:{dblclick:function(e){return t.handleCellClick(i.d_plan1)}}},[e("v-text-field",{staticClass:"my-text-field",attrs:{readonly:"",dense:"","hide-details":""},model:{value:i.d_plan1,callback:function(e){t.$set(i,"d_plan1",e)},expression:"item.d_plan1"}})],1):e("td",{attrs:{align:"center"}},[t._v(t._s(i.d_plan1))]),"x"==i.f_work?e("td",{on:{dblclick:function(e){return t.handleCellClick(i.d_plan2)}}},[e("v-text-field",{staticClass:"my-text-field",attrs:{readonly:"",dense:"","hide-details":""},model:{value:i.d_plan2,callback:function(e){t.$set(i,"d_plan2",e)},expression:"item.d_plan2"}})],1):e("td",{attrs:{align:"center"}},[t._v(t._s(i.d_plan2))]),e("td",{attrs:{align:"left"}},["1"==i.f_work?e("v-text-field",{staticClass:"my-text-field",attrs:{dense:"","hide-details":""},on:{input:t.setedit},model:{value:i.t_remark,callback:function(e){t.$set(i,"t_remark",e)},expression:"item.t_remark"}}):e("span",[t._v(t._s(i.t_remark))])],1)]):e("tr",{staticClass:"center-align",class:{row_select:i===t.selected},on:{click:function(e){return t.selectItem(i)}}},[e("td",[t._v(" "+t._s(a+1))]),e("td",{staticClass:"left-align"},[t._v(" "+t._s(i.n_item))]),e("td",{staticClass:"left-align"},[t._v(" "+t._s(i.t_size))]),e("td",[t._v(" "+t._s(i.i_unit))]),e("td",[t._v(" "+t._s(i.m_cnt))]),e("td",[t._v(" "+t._s(i.s_duedate))]),"1"==i.f_work||"2"==i.f_work?e("td",{on:{dblclick:function(e){return t.setWork(i)}}},[e("v-chip",{attrs:{"x-small":"",color:t.getColor(i.f_work),dark:""}},[t._v(t._s(t.getStatus(i.f_work)))])],1):e("td",{attrs:{align:"center"}},[e("v-chip",{attrs:{"x-small":"",color:t.getColor(i.f_work),dark:""}},[t._v(t._s(t.getStatus(i.f_work)))])],1),"x"==i.f_work?e("td",{on:{dblclick:function(e){return t.handleCellClick(i.d_plan1)}}},[e("v-text-field",{staticClass:"my-text-field",attrs:{readonly:"",dense:"","hide-details":""},model:{value:i.d_plan1,callback:function(e){t.$set(i,"d_plan1",e)},expression:"item.d_plan1"}})],1):e("td",{attrs:{align:"center"}},[t._v(t._s(i.d_plan1))]),"x"==i.f_work?e("td",{on:{dblclick:function(e){return t.handleCellClick(i.d_plan2)}}},[e("v-text-field",{staticClass:"my-text-field",attrs:{readonly:"",dense:"","hide-details":""},model:{value:i.d_plan2,callback:function(e){t.$set(i,"d_plan2",e)},expression:"item.d_plan2"}})],1):e("td",{attrs:{align:"center"}},[t._v(t._s(i.d_plan2))]),e("td",{attrs:{align:"left"}},["1"==i.f_work?e("v-text-field",{staticClass:"my-text-field",attrs:{dense:"","hide-details":""},on:{input:t.setedit},model:{value:i.t_remark,callback:function(e){t.$set(i,"t_remark",e)},expression:"item.t_remark"}}):e("span",[t._v(t._s(i.t_remark))])],1)])]}}])}),e("v-toolbar",{attrs:{height:"25px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("공정별 세부일정")]),e("v-spacer"),"1"==t.itemInfo.f_work?e("tooltip-btn",{attrs:{label:"초기화",height:20},on:{click:t.proccdel}},[e("v-icon",[t._v("mdi-notification-clear-all")])],1):t._e()],1),e("v-data-table",{ref:"table",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.routerHead,items:t.itemRouterFilter,"item-key":"i_ser","single-select":"","hide-default-footer":"","items-per-page":-1,"item-class":t.row_classes,height:t.iframeHeight},on:{"click:row":t.rowSelectRouter},scopedSlots:t._u([{key:"item.s_sort",fn:function({item:i}){return["1"==t.itemInfo.f_work&&i.i_ser===t.routerInfo.i_ser?e("input-number",{on:{input:function(e){return t.onChange(i)}},model:{value:i.s_sort,callback:function(e){t.$set(i,"s_sort",e)},expression:"item.s_sort"}}):e("div",[t._v(" "+t._s(i.s_sort))])]}},{key:"item.f_jobs",fn:function({item:i}){return[e("div",{on:{dblclick:function(e){return t.handleDoubleClick(i,"f_jobs")}}},["Y"==i.f_jobs?e("v-icon",{attrs:{small:"",color:"#008000"}},[t._v(" mdi-check ")]):e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-minus")])],1)]}},{key:"item.f_jobf",fn:function({item:i}){return[e("div",{on:{dblclick:function(e){return t.handleDoubleClick(i,"f_jobf")}}},["Y"==i.f_jobf?e("v-icon",{attrs:{small:"",color:"#008000"}},[t._v(" mdi-check ")]):e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-minus")])],1)]}},{key:"item.f_jobo",fn:function({item:i}){return["Y"==i.f_jobo?e("v-icon",{attrs:{small:"",color:"#008000"}},[t._v(" mdi-check ")]):e("v-icon",{attrs:{"x-small":""}},[t._v("mdi-minus")])]}},{key:"item.n_empnm",fn:function({item:i}){return["1"==t.itemInfo.f_work&&i.i_ser===t.routerInfo.i_ser?e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{readonly:"",dense:"","hide-details":""},on:{input:function(e){return t.onChange(i)}},scopedSlots:t._u([{key:"append",fn:function(){return[e("v-btn",{attrs:{"x-small":"",icon:""},on:{click:function(e){return t.getEmpno(i)}}},[e("v-icon",[t._v("mdi-check")])],1)]},proxy:!0}],null,!0),model:{value:i.n_empnm,callback:function(e){t.$set(i,"n_empnm",e)},expression:"item.n_empnm"}}):e("div",[t._v(" "+t._s(i.n_empnm))])]}},{key:"item.m_cnt",fn:function({item:i}){return["1"==t.itemInfo.f_work&&i.i_ser===t.routerInfo.i_ser?e("input-number",{on:{input:function(e){return t.onChange(i)}},model:{value:i.m_cnt,callback:function(e){t.$set(i,"m_cnt",e)},expression:"item.m_cnt"}}):e("div",[t._v(" "+t._s(i.m_cnt))])]}},{key:"item.s_date1",fn:function({item:i}){return["1"==t.itemInfo.f_work&&i.i_ser===t.routerInfo.i_ser?e("input-date-2",{staticClass:"my-text-table",attrs:{rules:t.rules.date({required:!1})},on:{input:function(e){return t.onChange(i)}},model:{value:i.s_date1,callback:function(e){t.$set(i,"s_date1",e)},expression:"item.s_date1"}}):e("div",[t._v(" "+t._s(i.s_date1))])]}},{key:"item.s_date2",fn:function({item:i}){return["1"==t.itemInfo.f_work&&i.i_ser===t.routerInfo.i_ser?e("input-date-2",{staticClass:"my-text-table",attrs:{rules:t.rules.date({required:!1})},on:{input:function(e){return t.onChange(i)}},model:{value:i.s_date2,callback:function(e){t.$set(i,"s_date2",e)},expression:"item.s_date2"}}):e("div",[t._v(" "+t._s(i.s_date2))])]}},{key:"item.m_whour",fn:function({item:i}){return["1"==t.itemInfo.f_work&&i.i_ser===t.routerInfo.i_ser?e("input-number",{on:{input:function(e){return t.onChange(i)}},model:{value:i.m_whour,callback:function(e){t.$set(i,"m_whour",e)},expression:"item.m_whour"}}):e("div",[t._v(" "+t._s(i.m_whour))])]}},{key:"item.t_remark",fn:function({item:i}){return["1"==t.itemInfo.f_work&&i.i_ser===t.routerInfo.i_ser?e("v-text-field",{staticClass:"my-text-field no-padding",attrs:{dense:"","hide-details":""},on:{input:function(e){return t.onChange(i)}},model:{value:i.t_remark,callback:function(e){t.$set(i,"t_remark",e)},expression:"item.t_remark"}}):e("span",[t._v(t._s(i.t_remark))])]}}],null,!0),model:{value:t.selectR,callback:function(e){t.selectR=e},expression:"selectR"}}),e("ez-dialog",{ref:"dialog_plan",attrs:{label:"생산계획일",persistent:"",width:"350px"},on:{onClose:t.close_plan}},[e("dates-dialog",{attrs:{sDate:t.selected.d_plan1,eDate:t.selected.d_plan2},on:{onEnter:t.setplandate}})],1),e("ez-dialog",{ref:"dialog_emp",attrs:{label:"작업자선택",persistent:"",width:"350px"},on:{onClose:t.close_plan}},[e("prod-getemp",{on:{onEnter:t.onEmpEnter}})],1)],1)},n=[],l=i("2f62"),s=i("d1b1"),o=i("a2e4"),r=i("414b"),d=i("f3db"),c=i("6b39"),u=i("12e3"),m=i("64f2"),p=i("248f"),_=i.n(p),f=i("e1ee"),h=i("1c76"),v=i("121b"),b=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-data-table",{ref:"item-table",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.itemHead,items:t.itemLists,"item-key":"i_empno","single-select":"","hide-default-footer":"","items-per-page":-1,"max-height":"280px",height:"280px"},on:{"click:row":t.rowSelect,"dblclick:row":t.rowEnter},model:{value:t.itemS,callback:function(e){t.itemS=e},expression:"itemS"}})],1)},x=[],g=(i("1b16"),{props:{},created(){this.init()},data(){return{itemHead:[{text:"사번",value:"i_empno",sortable:!1,align:"center",width:"70px"},{text:"성명",value:"n_empnm",sortable:!1,align:"center",width:"70px"},{text:"부서",value:"n_dept",sortable:!1,align:"center",width:"70px"}],itemLists:[],itemInfo:[],itemS:[]}},watch:{},computed:{},methods:{async rowSelect(t,e){this.itemInfo.i_empno!=t.i_empno&&(this.itemInfo=t,e?e.select(!0):this.itemS=[t])},async init(){this.itemLists=await this.$axios.post("/api/prod/getEmplist")},rowEnter(){this.$emit("onEnter",this.itemInfo)}}}),k=g,w=i("2877"),y=Object(w["a"])(k,b,x,!1,null,null,null),I=y.exports,C={components:{InputDateft:s["a"],TooltipBtn:r["a"],EzDialog:o["a"],InputDate2:d["a"],InputDate3:c["a"],DatesDialog:f["a"],InputAmt:h["a"],InputNumber:v["a"],ProdGetemp:I},data(){return{PROD001:u["d"],valid:!0,iframeHeight:200,form:{sDate1:"",sDate2:"",sVend:"",work:"order"},itemHead:[{text:"No",sortable:!1,align:"center",width:"25"},{text:"수주번호",value:"i_orderno",sortable:!1,align:"center",width:"75"},{text:"수주일",value:"s_date",sortable:!1,align:"center",width:"60px"},{text:"발주처",value:"n_vend",sortable:!1,align:"center",width:"120px"},{text:"항목(품목)",value:"n_item",sortable:!1,align:"center",width:"130px"},{text:"규격(사양)",value:"t_size",sortable:!1,align:"center",width:"100px"},{text:"단위",value:"i_unit",sortable:!1,align:"center",width:"50px"},{text:"수량",value:"m_cnt",sortable:!1,align:"center",width:"30px"},{text:"납기일",value:"s_duedate",sortable:!1,align:"center",width:"60px"},{text:"상태",value:"f_work",sortable:!1,align:"center",width:"30px"},{text:"시작일",value:"d_plan1",sortable:!1,align:"center",width:"60px"},{text:"종료일",value:"d_plan2",sortable:!1,align:"center",width:"60px"},{text:"비고",value:"t_remark",sortable:!1,align:"center",width:"300px"}],itemList:[],itemInfo:[],selected:[],routerHead:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"40"},{text:"첫공정",value:"f_jobs",sortable:!1,align:"center",width:"40"},{text:"외주",value:"f_jobo",sortable:!1,align:"center",width:"40"},{text:"마지막",value:"f_jobf",sortable:!1,align:"center",width:"40"},{text:"공정코드",value:"c_process",sortable:!1,align:"center",width:"75"},{text:"공정명",value:"n_process",sortable:!1,align:"center",width:"130"},{text:"작업자",value:"n_empnm",sortable:!1,align:"center",width:"100"},{text:"수량",value:"m_cnt",sortable:!1,align:"center",width:"75"},{text:"시작일",value:"s_date1",sortable:!1,align:"center",width:"75"},{text:"종료일",value:"s_date2",sortable:!1,align:"center",width:"75"},{text:"작업일수",value:"m_whour",sortable:!1,align:"center",width:"75"},{text:"비고",value:"t_remark",sortable:!1,align:"center",width:"120"}],itemRouters:[],itemRouterFilter:[],routerInfo:[],selectR:[],emplist:[],edit:!1}},mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.form.sDate1=Object(m["getDate"])(-100,1),this.init()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},watch:{},computed:{rules:()=>_.a},methods:{...Object(l["b"])("prod",["iuProdPlanlist2"]),adjustIframeHeight(){const t=window.innerHeight;this.iframeHeight=t-200-400},shouldMergeRow(t){const e=this.itemList.findIndex(e=>e.i_orderno===t.i_orderno);return e===this.itemList.indexOf(t)},getRowspan(t){const e=this.itemList.filter(e=>e.i_orderno===t.i_orderno).length;return e},async init(){this.emplist=await this.$axios.post("/api/prod/getEmplist"),this.view()},async view(){this.itemInfo=[],this.itemRouters=[],this.routerInfo=[],this.itemRouterFilter=[],this.selectR=[],this.itemList=await this.$axios.post("/api/prod/getProdPlanlist",this.form)},async add(){},async del(){},async save(){const t=this.itemList.filter(t=>"1"===t.f_edit).map(t=>({...t})),e=this.itemRouters.filter(t=>"1"===t.f_edit||"2"===t.f_edit).map(t=>({...t}));if(t.length||e.length){const i={master:t,detail:e},a=await this.iuProdPlanlist2(i);a&&(this.itemList.forEach((t,e)=>{t.f_edit="0",t.f_editold="0"}),this.itemRouters.forEach((t,e)=>{t.f_edit="0",t.f_editold="0"}),this.$toast.info("저장 하였습니다."))}},row_classes(t){if("2"==t.f_edit)return"orange"},rowSelect:function(t,e){this.itemInfo.i_orderser!=t.i_orderser&&(this.itemInfo=t,e?e.select(!0):this.selected=[t])},async selectItem(t,e){(this.itemInfo.i_orderser!=t.i_orderser||e)&&(this.selected=t,this.itemInfo=t,this.itemRouterFilter=this.itemRouters.filter(e=>e.c_com==t.c_com&&e.i_order==t.i_order&&e.i_orderser==t.i_orderser&&"2"!==e.f_edit).map(t=>({...t})),0==this.itemRouterFilter.length&&(e||(this.itemRouterFilter=await this.$axios.post("/api/prod/getProdplan",t)),this.itemRouterFilter.length?this.itemRouters=[...this.itemRouters,...this.itemRouterFilter]:parseInt(this.itemInfo.f_work)<2&&(this.itemRouterFilter=await this.$axios.post("/api/prod/getItemRouterProc",t),this.itemRouterFilter.forEach(t=>{t.i_order=this.itemInfo.i_order,t.i_orderser=this.itemInfo.i_orderser,t.m_cnt=this.itemInfo.m_cnt,t.s_date1=this.itemInfo.d_plan1,t.s_date2=this.itemInfo.d_plan2}),this.itemRouters=[...this.itemRouters,...this.itemRouterFilter])))},getStatus(t){var e=this.PROD001.find(e=>e.value===t);return void 0!==e?e.label:""},setWork(t){"1"==t.f_work&&(null==t.d_plan1||t.d_plan1.length<1||null==t.d_plan2||t.d_plan2.length<1)?this.$toast.error("생산계획일 미입력"):(t.f_work="1"==t.f_work?"2":"1",t.f_edit="1")},handleCellClick(){this.$refs.dialog_plan.open()},close_plan(){},setedit(){this.itemInfo&&(this.itemInfo.f_edit="1")},setplandate(t){this.$refs.dialog_plan.close(),this.itemInfo&&(this.itemInfo.f_edit="1"),t[1]?(this.itemInfo.d_plan1=t[0]>t[1]?t[1]:t[0],this.itemInfo.d_plan2=t[0]>t[1]?t[0]:t[1]):(this.itemInfo.d_plan1=t[0],this.itemInfo.d_plan2=t[0]),t.f_edit="1"},getColor(t){return"1"==t?"red":"2"==t?"blue":"green"},rowSelectRouter:function(t,e){this.routerInfo.i_ser!=t.i_ser&&(this.routerInfo=t,e?e.select(!0):this.selectR=[t])},onChange(t,e){t.f_edit="1";this.itemRouters.indexOf(t)},async getEmpno(t){this.$refs.dialog_emp.open()},async onEmpEnter(t){const e=this.itemRouters.indexOf(this.routerInfo);this.routerInfo.i_empno=t.i_empno,this.routerInfo.n_empnm=t.n_empnm,this.routerInfo.f_edit="1",e>=0&&this.itemRouters.splice(e,1,this.routerInfo),this.$refs.dialog_emp.close()},handleDoubleClick(t,e){if("1"===this.itemInfo.f_work){switch(e){case"f_jobs":t.f_jobs="Y"==t.f_jobs?"N":"Y";break;case"f_jobf":t.f_jobf="Y"==t.f_jobf?"N":"Y";break;case"f_jobo":t.f_jobo="Y"==t.f_jobo?"N":"Y";break}t.f_edit="1"}},async proccdel(){if("1"==this.itemInfo.f_work){for(let t=this.itemRouterFilter.length-1;t>=0;t--)if("1"==this.itemRouterFilter[t].f_editold)this.itemRouterFilter.splice(t,1);else{const e=this.itemRouters.indexOf(this.itemRouterFilter[t]);this.itemRouters[e].f_edit="2",this.itemRouterFilter[t].f_edit="2"}await this.selectItem(this.itemInfo,"del")}}}},R=C,$=Object(w["a"])(R,a,n,!1,null,null,null);e["default"]=$.exports},d1b1:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"190px",display:"flex"}},[e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({attrs:i}){return[e("v-text-field",t._b({staticClass:"my-text-field",attrs:{dense:"","hide-details":"",value:t.value,readonly:t.readonly},on:{input:t.onInput},scopedSlots:t._u([t.readonly?null:{key:"append",fn:function(){return[e("v-btn",{attrs:{icon:"",small:"",tabindex:"-1"},on:{click:t.open}},[e("v-icon",[t._v("mdi-calendar-today")])],1)]},proxy:!0}],null,!0)},"v-text-field",{...t.$attrs,...i},!1))]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.$attrs.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:"",plain:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-date-picker",{attrs:{"no-title":"","day-format":t.dayFormat},on:{input:t.picker},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),e("v-text-field",{staticClass:"no-padding",staticStyle:{width:"20px","border-bottom":"none"},attrs:{dense:"","hide-details":"",value:"∽",readonly:t.readonly},on:{input:t.onInput}}),e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({attrs:i}){return[e("v-text-field",t._b({staticClass:"my-text-field",attrs:{dense:"","hide-details":"",value:t.value2,readonly:t.readonly},on:{input:t.onInput2},scopedSlots:t._u([t.readonly?null:{key:"append",fn:function(){return[e("v-btn",{attrs:{icon:"",small:"",tabindex:"-1"},on:{click:t.open2}},[e("v-icon",[t._v("mdi-calendar-today")])],1)]},proxy:!0}],null,!0)},"v-text-field",{...t.$attrs,...i},!1))]}}]),model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.$attrs.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:"",plain:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-date-picker",{attrs:{"no-title":"","day-format":t.dayFormat},on:{input:t.picker2},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1)],1)},n=[],l=(i("64f2"),{name:"InputDateft",model:{prop:"value",event:"input"},model2:{prop:"value2",event:"input2"},props:{value:String,value2:String,readonly:Boolean},data(){return{modal:!1,date:"",modal2:!1,date2:""}},watch:{date2(t){this.$emit("update:value2",t)}},methods:{onInput(t){this.$emit("input",t)},picker(){this.onInput(this.date),this.close()},open(){const t=/^\d{4}-\d{2}-\d{2}$/;this.date=t.test(this.value)?this.value:this.date,this.modal=!0},close(){this.modal=!1,this.modal2=!1},onInput2(t){this.$emit("input2",t)},picker2(){this.onInput2(this.date2),this.close()},open2(){const t=/^\d{4}-\d{2}-\d{2}$/;this.date2=t.test(this.value2)?this.value2:this.date2,this.modal2=!0},dayFormat(t){if(!this.modal&&!this.modal2)return;const e=t.split("-");return Number(e[e.length-1])}}}),s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports},e1ee:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[e("p"),e("v-date-picker",{attrs:{"no-title":"",range:"","day-format":t.dayFormat},on:{input:t.handleDateChange},model:{value:t.selectedDates,callback:function(e){t.selectedDates=e},expression:"selectedDates"}}),t.selectedDates[1]>t.selectedDates[0]?e("v-btn",{attrs:{color:"primary",block:""},on:{click:t.onclick}},[t._v(" 기간 : "+t._s(t.selectedRange[0])+" ∽ "+t._s(t.selectedRange[1])+" ")]):e("v-btn",{attrs:{color:"primary",block:""},on:{click:t.onclick}},[t._v(" 기간 : "+t._s(t.selectedRange[1])+" ∽ "+t._s(t.selectedRange[0])+" ")])],1)},n=[],l={props:{sDate:{type:String,default:""},eDate:{type:String,default:""}},watch:{sDate(){this.selectedDates[0]=this.sDate,this.selectedRange=[...this.selectedDates]},eDate(){this.selectedDates[1]=this.eDate,this.selectedRange=[...this.selectedDates]}},created(){},data(){return{selectedRange:[],selectedDates:[]}},methods:{handleDateChange(t){this.selectedRange=t},onclick(){this.$emit("onEnter",this.selectedRange)},dayFormat(t){const e=t.split("-");return Number(e[e.length-1])}}},s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports},f3db:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function({attrs:i}){return[e("v-text-field",t._b({staticClass:"my-text-table my-text-field",attrs:{dense:"","hide-details":"",value:t.value,readonly:t.readonly},on:{input:t.onInput},scopedSlots:t._u([t.readonly?null:{key:"append",fn:function(){return[e("v-btn",{attrs:{icon:"",small:"",tabindex:"-1"},on:{click:t.open}},[e("v-icon",[t._v("mdi-calendar-today")])],1)]},proxy:!0}],null,!0)},"v-text-field",{...t.$attrs,...i},!1))]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.$attrs.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:"",plain:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-date-picker",{attrs:{"no-title":"","day-format":t.dayFormat},on:{input:t.picker},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)},n=[],l={name:"InputDate2",model:{prop:"value",event:"input"},props:{value:String,readonly:Boolean},data(){return{modal:!1,date:""}},methods:{onInput(t){this.$emit("input",t)},open(){const t=/^\d{4}-\d{2}-\d{2}$/;this.date=t.test(this.value)?this.value:this.date,this.modal=!0},close(){this.modal=!1,this.modal2=!1},picker(){this.onInput(this.date),this.close()},dayFormat(t){if(!this.modal)return;const e=t.split("-");return Number(e[e.length-1])}}},s=l,o=i("2877"),r=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=ProdWorkorder.47024abf.js.map