(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["KPILevel1"],{"414b":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e("v-btn",t._g(t._b({class:t.childClass,on:{click:function(e){return t.$emit("click")}}},"v-btn",{...i,...t.$attrs},!1),s),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},a=[],r={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},o=r,n=s("2877"),l=Object(n["a"])(o,i,a,!1,null,null,null);e["a"]=l.exports},e746:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("KPI 핵심성과지표 레벨1")]),e("v-spacer"),t._v(" 조회년월 : "),e("tooltip-btn",{attrs:{label:"전월"},on:{click:t.prevMon}},[e("v-icon",[t._v("mdi-chevron-left")])],1),t._v(" "+t._s(t.cleandarYM)+" "),e("tooltip-btn",{attrs:{label:"다음월"},on:{click:t.nextMon}},[e("v-icon",[t._v("mdi-chevron-right")])],1),e("tooltip-btn",{attrs:{label:"조회"},on:{click:t.view}},[e("v-icon",[t._v("mdi-magnify")])],1)],1),e("v-row",[e("v-col",[e("v-toolbar",{attrs:{height:"30px",color:"accent"}},[e("v-toolbar-title",[t._v("KPI인증상호: "+t._s(this.siteKpiifno.n_kpiconm))])],1),e("v-data-table",{ref:"table",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.masterHead,items:t.masters,"item-key":"s_day","single-select":"","hide-default-footer":"","items-per-page":-1,"footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:"550px","max-height":"550px"},on:{"click:row":t.rowSelectMaster},model:{value:t.selectedM,callback:function(e){t.selectedM=e},expression:"selectedM"}})],1),e("v-col",[e("v-toolbar",{attrs:{height:"30px",color:"accent"}},[e("v-toolbar-title",[t._v("선택날짜: "+t._s(this.selectdata.ocrDttm))])],1),e("v-toolbar",{attrs:{height:"100px",color:"grey lighten-4"}},[e("v-switch",{attrs:{label:"시스템가동 : "+this.selectdata.systmOprYn},model:{value:t.systmOprYn,callback:function(e){t.systmOprYn=e},expression:"systmOprYn"}}),e("v-spacer"),e("v-btn",{attrs:{small:"",color:t.systmOprYn?"success":"error"},on:{click:t.kpi1Test1}},[t._v("KPI 전송")])],1),e("v-data-table",{ref:"item-table",staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.itemHead,items:t.itemListsselect,"item-key":"t_no","single-select":"","hide-default-footer":"","items-per-page":-1,"max-height":"140px",height:"140px"},on:{"click:row":t.rowSelectDetail},model:{value:t.selectedD,callback:function(e){t.selectedD=e},expression:"selectedD"}}),e("v-textarea",{attrs:{readonly:"",label:"전송내용","hide-details":"false"},model:{value:t.itemInfo.t_req,callback:function(e){t.$set(t.itemInfo,"t_req",e)},expression:"itemInfo.t_req"}}),e("v-textarea",{attrs:{readonly:"",label:"전송결과","hide-details":"false"},model:{value:t.itemInfo.t_res,callback:function(e){t.$set(t.itemInfo,"t_res",e)},expression:"itemInfo.t_res"}})],1)],1)],1)},a=[],r=(s("14d9"),s("414b")),o=(s("64f2"),{components:{TooltipBtn:r["a"]},mounted(){this.init()},data(){return{ym:{y:0,m:0},siteKpiifno:{i_company:"",i_kpikey:"",f_kpichk:"",n_kpiconm:""},form:{s_ym:"",f_tst:"Y"},systmOprYn:!0,selectdata:{t_no:0,c_com:"",kpiCertKey:"",ocrDttm:"",systmOprYn:"Y",trsDttm:"",f_tst:"Y",t_req:"",t_res:"",f_err:""},masterHead:[{text:"날자",value:"s_day",sortable:!1,align:"center",width:"55px"},{text:"처리",value:"m_cnt",sortable:!1,align:"center",width:"40px"},{text:"성공",value:"m_ok",sortable:!1,align:"center",width:"40px"},{text:"실패",value:"m_no",sortable:!1,align:"center",width:"40px"}],masters:[],masterinfo:[],selectedM:[],itemHead:[{text:"kpiCertKey",value:"kpiCertKey",sortable:!1,align:"center",width:"55px"},{text:"ocrDttm",value:"ocrDttm",sortable:!1,align:"center",width:"55px"},{text:"systmOprYn",value:"systmOprYn",sortable:!1,align:"center",width:"55px"},{text:"trsDttm",value:"trsDttm",sortable:!1,align:"center",width:"55px"},{text:"error",value:"f_err",sortable:!1,align:"center",width:"55px"}],itemLists:[],itemListsselect:[],itemInfo:[],selectedD:[]}},computed:{cleandarYM(){return`${this.ym.y}년 ${String(this.ym.m+1).padStart(2,"0")}월`}},watch:{ym:{deep:!0,handler(t,e){this.form.s_ym=this.yyyymm()}},systmOprYn:{handler(t,e){this.selectdata.systmOprYn=t?"Y":"N"}}},methods:{async init(){const t=new Date(Date.now());this.ym.y=t.getFullYear(),this.ym.m=t.getMonth(),this.siteKpiifno=await this.$axios.get("/api/system/getSiteKpiInfo"),this.selectdata.c_com=this.$store.state.user.member.c_com,this.selectdata.kpiCertKey=this.siteKpiifno.i_kpikey},yyyymm(){return`${this.ym.y}${String(this.ym.m+1).padStart(2,"0")}`},prevMon(){0==this.ym.m?(this.ym.m=11,this.ym.y=this.ym.y-1):this.ym.m=this.ym.m-1},nextMon(){11==this.ym.m?(this.ym.m=0,this.ym.y=this.ym.y+1):this.ym.m=this.ym.m+1},async view(){this.masterinfo=[],this.selectedM=[],this.itemLists=[],this.itemListsselect=[],this.itemInfo=[],this.masters=await this.$axios.post("/api/kpi/getKpi1",this.form),this.itemLists=await this.$axios.post("/api/kpi/getKpi1dt",this.form)},async kpi1Test1(){if(void 0==this.masterinfo.s_day)return;if("Y"!==this.siteKpiifno.f_kpichk)return;const t=await this.$ezNotify.confirm(`날짜 : ${this.masterinfo.s_day}, 시스템 가동 상태 : ${this.systmOprYn?"Y":"N"}`,"KPI전송",{icon:"mdi-message-bulleted-off",width:350});if(!t)return;const e=await this.$axios.post("/api/kpi/sendKpi1",this.selectdata),s=this.itemListsselect.push(e);s>=0&&(this.itemLists.push(e),this.masterinfo.m_cnt=this.masterinfo.m_cnt+1,"N"==e.f_err?this.masterinfo.m_ok=this.masterinfo.m_ok+1:this.masterinfo.m_no=this.masterinfo.m_no+1)},async kpi1Test2(){await this.$axios.post("/api/kpi/loadKpi1")},async rowSelectMaster(t,e){this.masterinfo.s_day!=t.s_day&&(this.masterinfo=t,e?e.select(!0):this.selectedM=[t],this.selectdata.ocrDttm=t.s_date,this.selectedD=[],this.itemInfo=[],this.itemLists.length>0?this.itemListsselect=this.itemLists.filter(e=>e.ocrDttm==t.ocrDttm&&e.c_com==t.c_com):this.itemListsselect=[])},rowSelectDetail(t,e){this.itemInfo=t,e?e.select(!0):this.selectedD=[t]}}}),n=o,l=s("2877"),c=Object(l["a"])(n,i,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=KPILevel1.42da7c56.js.map