(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Basejobvend"],{"161d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{fluid:""}},[t("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[t("v-toolbar-title",[e._v("거래처(고객사) 관리")]),t("v-spacer"),t("v-text-field",{attrs:{ense:"","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("tooltip-btn",{attrs:{label:"조회"},on:{click:e.init}},[t("v-icon",[e._v("mdi-magnify")])],1),t("tooltip-btn",{attrs:{label:"추가"},on:{click:e.addVend}},[t("v-icon",[e._v("mdi-plus")])],1),t("tooltip-btn",{attrs:{label:"삭제"},on:{click:e.delVend}},[t("v-icon",[e._v("mdi-minus")])],1)],1),t("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:e.headers,items:e.vends,"item-key":"c_vend","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:e.iframeHeight},on:{"click:row":e.rowSelect,"dblclick:row":e.showRowInfo},scopedSlots:e._u([{key:"item.s_sort",fn:function({item:a}){return[t("v-chip",{attrs:{"x-small":"",color:e.getColor(a.f_use),dark:""}},[e._v(" "+e._s(a.s_sort)+" ")])]}}],null,!0)}),t("ez-dialog",{ref:"dialog",attrs:{label:"거래처(고객사)",persistent:"",width:"700px"},on:{onClose:e.close}},[t("basejobvend-form",{attrs:{data:e.vend,keyCheckVend:e.keyCheckVend,isLoad:e.isLoad,s_sort:e.getMaxNo},on:{onSave:e.vendSave}})],1)],1)},s=[],o=(a("14d9"),a("4328")),i=a.n(o),n=a("2f62"),r=a("a2e4"),d=a("414b"),c=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"grey lighten-5"},[t("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{col:"12",sm:"2",md:"2"}},[t("v-text-field",{attrs:{label:"No",rules:[e.rules.Num()],solo:"","hide-details":"false"},model:{value:e.form.s_sort,callback:function(t){e.$set(e.form,"s_sort",t)},expression:"form.s_sort"}})],1),t("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[t("v-text-field",{attrs:{label:"명칭",solo:"","hide-details":"false"},model:{value:e.form.n_compnay,callback:function(t){e.$set(e.form,"n_compnay",t)},expression:"form.n_compnay"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-checkbox",{attrs:{label:"거래유무","true-value":"Y","false-value":"N","hide-details":"false"},model:{value:e.form.f_use,callback:function(t){e.$set(e.form,"f_use",t)},expression:"form.f_use"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"약칭",solo:"","hide-details":"false"},model:{value:e.form.n_vend,callback:function(t){e.$set(e.form,"n_vend",t)},expression:"form.n_vend"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"대표자","hide-details":"false"},model:{value:e.form.n_ceo,callback:function(t){e.$set(e.form,"n_ceo",t)},expression:"form.n_ceo"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"사업자번호","hide-details":"false"},model:{value:e.form.i_company,callback:function(t){e.$set(e.form,"i_company",t)},expression:"form.i_company"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"연락처","hide-details":"false"},model:{value:e.form.t_tel,callback:function(t){e.$set(e.form,"t_tel",t)},expression:"form.t_tel"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"FAX","hide-details":"false"},model:{value:e.form.t_fax,callback:function(t){e.$set(e.form,"t_fax",t)},expression:"form.t_fax"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"회사EMail","hide-details":"false"},model:{value:e.form.e_mail,callback:function(t){e.$set(e.form,"e_mail",t)},expression:"form.e_mail"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"담당자","hide-details":"false"},model:{value:e.form.n_mag,callback:function(t){e.$set(e.form,"n_mag",t)},expression:"form.n_mag"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"담당자연락처","hide-details":"false"},model:{value:e.form.t_magtel,callback:function(t){e.$set(e.form,"t_magtel",t)},expression:"form.t_magtel"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-text-field",{attrs:{label:"담당자EMail","hide-details":"false"},model:{value:e.form.t_magmail,callback:function(t){e.$set(e.form,"t_magmail",t)},expression:"form.t_magmail"}})],1),t("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[t("v-text-field",{attrs:{label:"업태","hide-details":"false"},model:{value:e.form.t_job1,callback:function(t){e.$set(e.form,"t_job1",t)},expression:"form.t_job1"}})],1),t("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[t("v-text-field",{attrs:{label:"업종","hide-details":"false"},model:{value:e.form.t_job2,callback:function(t){e.$set(e.form,"t_job2",t)},expression:"form.t_job2"}})],1),t("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[t("v-text-field",{attrs:{label:"회사 주소","hide-details":"false"},model:{value:e.form.t_addr,callback:function(t){e.$set(e.form,"t_addr",t)},expression:"form.t_addr"}})],1),t("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[t("v-text-field",{attrs:{label:"비고","hide-details":"false"},model:{value:e.form.t_remark,callback:function(t){e.$set(e.form,"t_remark",t)},expression:"form.t_remark"}})],1)],1),t("v-row",[t("v-col")],1),t("v-btn",{attrs:{type:"submit",color:"primary",block:""}},[e._v("저장")])],1)],1)},m=[],f=a("64f2"),v=a("248f"),u=a.n(v),_=a("f075"),h={components:{InputRadio:_["a"]},name:"BasejobvendForm",props:{data:{type:Object,default:null},keyCheckVend:{type:Function,default:null},isLoad:{type:Boolean,default:null},s_sort:{type:Number,default:0}},data(){return{valid:!0,form:{c_com:"",c_vend:"",s_sort:0,n_vend:"",n_compnay:"",n_ceo:"",i_company:"",t_job1:"",t_job2:"",t_tel:"",t_fax:"",e_mail:"",t_addr:"",n_mag:"",t_magtel:"",t_magmail:"",f_use:"Y",t_remark:""},YesorNo:[{label:"거래",value:"Y"},{label:"중지",value:"N"}]}},created(){this.init()},watch:{data(){this.init()},isLoad(){this.init()}},computed:{rules:()=>u.a},methods:{async init(){this.data?this.form=Object(f["deepCopy"])(this.data):this.form={c_com:this.$store.state.user.member.c_com,c_vend:"",s_sort:1+(0|this.s_sort),n_vend:"",n_compnay:"",n_ceo:"",i_company:"",t_job1:"",t_job2:"",t_tel:"",t_fax:"",e_mail:"",t_addr:"",n_mag:"",t_magtel:"",t_magmail:"",f_use:"Y",t_remark:""},this.$refs.form&&this.$refs.form.resetValidation()},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&this.$emit("onSave",this.form)}}},b=h,p=a("2877"),x=Object(p["a"])(b,c,m,!1,null,null,null),g=x.exports,k={components:{TooltipBtn:d["a"],EzDialog:r["a"],BasejobvendForm:g},name:"Basejobvend",mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.init()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},data(){return{iframeHeight:500,headers:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"50px"},{text:"약칭",value:"n_vend",sortable:!1,align:"center",width:"100px"},{text:"명칭",value:"n_compnay",sortable:!1,align:"center",width:"200px"},{text:"사업자번호",value:"i_company",sortable:!1,align:"center",width:"120px"},{text:"대표자",value:"n_ceo",sortable:!1,align:"center",width:"110px"},{text:"전화",value:"t_tel",sortable:!1,align:"center",width:"125px"},{text:"FAX",value:"t_fax",sortable:!1,align:"center",width:"125px"},{text:"EMail",value:"e_mail",sortable:!1,align:"center",width:"150px"},{text:"담당자",value:"n_mag",sortable:!1,align:"center",width:"110px"},{text:"전화",value:"t_magtel",sortable:!1,align:"center",width:"125px"},{text:"EMail",value:"t_magmail",sortable:!1,align:"center",width:"150px"}],vends:[],vend:null,search:"",isLoad:!1}},watch:{},computed:{getMaxNo(){const e=Math.max(...this.vends.map(e=>e.s_sort));return isFinite(e)?e:0}},methods:{...Object(n["b"])("basejob",["duplicateVendCheck","iuBaseVend"]),adjustIframeHeight(){const e=window.innerHeight;this.iframeHeight=e-200},async init(){const e={search:this.search.trim()},t=i.a.stringify(e);this.vends&&this.vends.splice(0),this.vends=await this.$axios.get("/api/basejob/getBaseVned?"+t)},async addVend(){this.isLoad=!0,this.vend=null,this.$refs.dialog.open()},async delVend(){const e=this.vends.indexOf(this.vend),t=await this.$ezNotify.confirm(`<b>거래처 : ${this.vend.n_vend}</b> 삭제 하시겠습니까 ?`,"거래처 삭제",{icon:"mdi-delete",iconColor:"red"});if(!t)return;const a=await this.$axios.delete(`/api/basejob/delBaseVned/${this.vend.c_com}/${this.vend.c_vend}`);a&&(this.vends.splice(e,1),this.$toast.info(`[${this.vend.n_vend}] 삭제 하였습니다.`))},rowSelect:function(e,t){t.select(!0),this.vend=e},getColor(e){return"N"==e?"red":"green"},async keyCheckVend(){},async showRowInfo(e,{item:t}){this.isLoad=!0,this.vend=t,this.$refs.dialog.open()},async vendSave(e){this.isLoading=!0;const t=await this.iuBaseVend(e);if(this.isLoading=!1,t){this.$toast.info(`[${t.n_vend}] 저장 하였습니다.`);const e=this.vends.indexOf(this.vend);e>=0?this.vends.splice(e,1,t):this.vends.push(t)}this.$refs.dialog.close()},async close(){this.isLoad=!1}}},y=k,w=Object(p["a"])(y,l,s,!1,null,null,null);t["default"]=w.exports},"414b":function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:l}){return[t("v-btn",e._g(e._b({class:e.childClass,on:{click:function(t){return e.$emit("click")}}},"v-btn",{...l,...e.$attrs},!1),a),[e._t("default")],2)]}}],null,!0)},[t("span",[e._v(e._s(e.label))])])},s=[],o={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},i=o,n=a("2877"),r=Object(n["a"])(i,l,s,!1,null,null,null);t["a"]=r.exports},a2e4:function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("v-dialog",e._b({model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},"v-dialog",e.$attrs,!1),[t("v-card",[t("v-toolbar",[t("v-toolbar-title",[e._v(e._s(e.label))]),t("v-spacer"),e.obtn?t("v-btn",{attrs:{color:"primary",small:""},on:{click:e.btnClick}},[e._v(" "+e._s(e.obtn)+" ")]):e._e(),t("v-btn",{attrs:{icon:""},on:{click:e.close}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("v-card-text",[e._t("default")],2)],1)],1)},s=[],o={name:"ezDialog",props:{label:{type:String,required:!0},obtn:{type:String}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1,this.$emit("onClose")},open(){this.$emit("onOpen"),this.dialog=!0},btnClick(){this.dialog=!1,this.$emit("btnClick")}}},i=o,n=a("2877"),r=Object(n["a"])(i,l,s,!1,null,null,null);t["a"]=r.exports}}]);
//# sourceMappingURL=Basejobvend.8cca48a3.js.map