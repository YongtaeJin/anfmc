(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Systemcode"],{"414b":function(e,t,o){"use strict";var s=function(){var e=this,t=e._self._c;return t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t("v-btn",e._g(e._b({class:e.childClass,on:{click:function(t){return e.$emit("click")}}},"v-btn",{...s,...e.$attrs},!1),o),[e._t("default")],2)]}}],null,!0)},[t("span",[e._v(e._s(e.label))])])},i=[],c={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},a=c,r=o("2877"),l=Object(r["a"])(a,s,i,!1,null,null,null);t["a"]=l.exports},6614:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{fluid:""}},[t("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[t("v-toolbar-title",[e._v("시스템코드 관리")]),t("v-spacer"),t("tooltip-btn",{attrs:{label:"조회"},on:{click:e.fetchData}},[t("v-icon",[e._v("mdi-magnify")])],1)],1),t("v-layout",[t("v-flex",{attrs:{xs5:""}},[t("grpcode-form",{attrs:{data:e.grpcodes},on:{onSelect:e.grpSelect,onshowRowInfo:e.grpInfo,onDelete:e.delGrpcode}})],1),t("v-flex",{attrs:{xs7:""}},[t("comcode-form",{attrs:{data:e.comcode,title:e.comTitle},on:{onshowRowInfo:e.comcodeInfo,onDelete:e.delComcode}})],1)],1),t("ez-dialog",{ref:"dialogGrpcode",attrs:{label:"Grop Code",persistent:"",width:"350px"},on:{onClose:e.closeGrpcode}},[t("grpcode-detail-form",{attrs:{data:e.grpdetail,keyCheckId:e.keyCheckGrp,isLoad:e.isLoad,s_sort:e.getMaxNo},on:{onSave:e.grpSave}})],1),t("ez-dialog",{ref:"dialogComcode",attrs:{label:"공통 Code",persistent:"",width:"350px"},on:{onClose:e.closeComcode}},[t("comcode-detail-form",{attrs:{data:e.comdetail,keyCheckId:e.keyCheckComcode,isLoad:e.isLoad,c_gcode:e.c_gcode,s_sort:e.getComMaxNo},on:{onSave:e.comcodeSave}})],1)],1)},i=[],c=(o("14d9"),o("2f62")),a=o("a2e4"),r=o("414b"),l=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"grey lighten-5"},[t("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:"No",rules:[e.rules.Num()]},model:{value:e.form.s_sort,callback:function(t){e.$set(e.form,"s_sort",t)},expression:"form.s_sort"}}),t("input-duplicate-comcode-check",{ref:"c_code",attrs:{label:"Code",gcode:e.form.c_gcode,cbCheck:e.keyCheckId,origin:e.originKeyId,readonly:!!e.data,rules:[e.rules.require({label:"Code"}),e.rules.alphaNum()]},model:{value:e.form.c_code,callback:function(t){e.$set(e.form,"c_code",t)},expression:"form.c_code"}}),t("v-text-field",{attrs:{label:"명칭"},model:{value:e.form.n_code,callback:function(t){e.$set(e.form,"n_code",t)},expression:"form.n_code"}}),t("v-text-field",{attrs:{label:"문자열 1"},model:{value:e.form.s_buf1,callback:function(t){e.$set(e.form,"s_buf1",t)},expression:"form.s_buf1"}}),t("v-text-field",{attrs:{label:"문자열 2"},model:{value:e.form.s_buf2,callback:function(t){e.$set(e.form,"s_buf2",t)},expression:"form.s_buf2"}}),t("v-text-field",{attrs:{label:"숫자열 1",rules:[e.rules.Numbuer()]},model:{value:e.form.m_buf1,callback:function(t){e.$set(e.form,"m_buf1",t)},expression:"form.m_buf1"}}),t("v-text-field",{attrs:{label:"숫자열 2",rules:[e.rules.Numbuer()]},model:{value:e.form.m_buf2,callback:function(t){e.$set(e.form,"m_buf2",t)},expression:"form.m_buf2"}}),t("v-textarea",{attrs:{label:"설명"},model:{value:e.form.t_remark,callback:function(t){e.$set(e.form,"t_remark",t)},expression:"form.t_remark"}}),t("v-btn",{attrs:{type:"submit",color:"primary",block:""}},[e._v("저장")])],1)],1)},n=[],d=o("64f2"),u=o("248f"),h=o.n(u),m=function(){var e=this,t=e._self._c;return t("v-text-field",e._b({ref:"field",attrs:{value:e.value,maxlength:e.$attrs.counter,"error-messages":e.errMsg,"success-messages":e.successMsg},on:{input:e.onInput},scopedSlots:e._u([e.isCheck?null:{key:"append",fn:function(){return[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t("v-btn",e._g(e._b({attrs:{icon:"",small:"",tabindex:"-1",loading:e.loading},on:{click:e.check}},"v-btn",s,!1),o),[t("v-icon",[e._v("mdi-check")])],1)]}}],null,!1,1344435932)},[e._v(" "+e._s(e.$attrs.label)+" 중복검사 ")])]},proxy:!0}],null,!0)},"v-text-field",e.$attrs,!1))},f=[],p={name:"InputDuplicateComcodeCheck",model:{prop:"value",event:"input"},props:{value:String,cbCheck:{type:Function,default:null},origin:{type:String,default:""},gcode:{type:String,default:""}},watch:{origin(){this.isCheck=!!this.origin||!this.cbCheck}},data(){return{isCheck:!!this.origin||!this.cbCheck,loading:!1,errMsg:"",successMsg:""}},computed:{isSend(){return!!this.cbCheck&&0===this.$refs.field.errorBucket.length}},mounted(){},methods:{onInput(e){this.isCheck=this.origin?this.origin===e:!this.cbCheck,this.errMsg="",this.successMsg="",this.$emit("input",e)},init(){this.errMsg="",this.successMsg=""},async check(){if(!this.isSend)return;this.loading=!0,this.errMsg="",this.successMsg="";const e=await this.cbCheck(this.$store.state.user.member.c_com,this.gcode,this.value);this.value?0==e.cnt?(this.successMsg=`사용 가능한 ${this.$attrs.label} 입니다.`,this.isCheck=!0):(this.errMsg=`중복된 ${this.$attrs.label} 입니다.`,this.isCheck=!1):this.successMsg="",this.loading=!1},validate(){return this.isCheck||(this.errMsg=this.$attrs.label+" 중복검사를 해주세요.",this.$refs.field.focus()),this.isCheck}}},g=p,_=o("2877"),b=Object(_["a"])(g,m,f,!1,null,null,null),v=b.exports,k={components:{InputDuplicateComcodeCheck:v},name:"ComcodeDetailForm",props:{data:{type:Object,default:null},keyCheckId:{type:Function,default:null},isLoad:{type:Boolean,default:null},c_gcode:{type:String,default:null},s_sort:{type:Number,default:0}},data(){return{valid:!0,form:{c_com:"",c_gcode:"",c_code:"",n_code:"",s_sort:0,s_buf1:"",s_buf2:"",s_buf3:"",m_buf1:0,m_buf2:0,m_buf3:0,t_remark:""}}},created(){this.init()},watch:{isLoad(){this.init()}},computed:{rules:()=>h.a,originKeyId(){return this.data?this.data.c_code:""}},methods:{async init(){this.data?this.form=Object(d["deepCopy"])(this.data):this.form={c_com:this.$store.state.user.member.c_com,c_gcode:this.c_gcode,c_code:"",n_code:"",s_sort:1+(0|this.s_sort),s_buf1:"",s_buf2:"",s_buf3:"",m_buf1:0,m_buf2:0,m_buf3:0,t_remark:""},this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.c_code.init())},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&this.$refs.c_code.validate()&&(this.$emit("onSave",this.form),this.init())}}},C=k,x=Object(_["a"])(C,l,n,!1,null,null,null),y=x.exports,$=function(){var e=this,t=e._self._c;return t("div",[t("v-toolbar",{attrs:{height:"40px","background-color":"primary"}},[t("v-toolbar-title",[e._v(e._s(e.title))]),t("v-spacer"),t("tooltip-btn",{attrs:{label:"추가",fab:"","x-small":""},on:{click:e.addUser}},[t("v-icon",[e._v("mdi-plus")])],1),t("tooltip-btn",{attrs:{label:"삭제",fab:"","x-small":""},on:{click:e.delUser}},[t("v-icon",[e._v("mdi-minus")])],1)],1),t("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:e.headers,items:e.data,"item-key":"c_code","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:"500px","max-height":"500px"},on:{"click:row":e.rowSelect,"dblclick:row":e.showRowInfo}})],1)},w=[],S={components:{TooltipBtn:r["a"]},name:"ComcodeForm",props:{title:{type:String,default:null},data:{type:Array,default:null}},watch:{},computed:{},data(){return{headers:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"30px"},{text:"Code",value:"c_code",sortable:!1},{text:"명칭",value:"n_code",sortable:!1},{text:"문자1",value:"s_buf1",sortable:!1},{text:"문자2",value:"s_buf2",sortable:!1},{text:"숫자1",value:"m_buf1",sortable:!1},{text:"숫자2",value:"m_buf2",sortable:!1},{text:"비고",value:"t_remark",sortable:!1}],item:null}},methods:{async fetchData(){},async addUser(){this.$emit("onshowRowInfo")},async delUser(){this.$emit("onDelete",this.item)},rowSelect:function(e,t){t.select(!0),this.item=e,this.$emit("onSelect",e)},async showRowInfo(e,{item:t}){this.$emit("onshowRowInfo",t)}}},M=S,I=Object(_["a"])(M,$,w,!1,null,null,null),G=I.exports,O=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"grey lighten-5"},[t("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:"No",rules:[e.rules.Num()]},model:{value:e.form.s_sort,callback:function(t){e.$set(e.form,"s_sort",t)},expression:"form.s_sort"}}),t("input-duplicate-grpcode-check",{ref:"c_gcode",attrs:{label:"Code",cbCheck:e.keyCheckId,origin:e.originKeyId,readonly:!!e.data,rules:[e.rules.require({label:"Code"}),e.rules.alphaNum()]},model:{value:e.form.c_gcode,callback:function(t){e.$set(e.form,"c_gcode",t)},expression:"form.c_gcode"}}),t("v-text-field",{attrs:{label:"명칭"},model:{value:e.form.n_gcode,callback:function(t){e.$set(e.form,"n_gcode",t)},expression:"form.n_gcode"}}),t("v-textarea",{attrs:{label:"설명"},model:{value:e.form.t_remark,callback:function(t){e.$set(e.form,"t_remark",t)},expression:"form.t_remark"}}),t("v-btn",{attrs:{type:"submit",color:"primary",block:""}},[e._v("저장")])],1)],1)},D=[],N=function(){var e=this,t=e._self._c;return t("v-text-field",e._b({ref:"field",attrs:{value:e.value,maxlength:e.$attrs.counter,"error-messages":e.errMsg,"success-messages":e.successMsg},on:{input:e.onInput},scopedSlots:e._u([e.isCheck?null:{key:"append",fn:function(){return[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t("v-btn",e._g(e._b({attrs:{icon:"",small:"",tabindex:"-1",loading:e.loading},on:{click:e.check}},"v-btn",s,!1),o),[t("v-icon",[e._v("mdi-check")])],1)]}}],null,!1,1344435932)},[e._v(" "+e._s(e.$attrs.label)+" 중복검사 ")])]},proxy:!0}],null,!0)},"v-text-field",e.$attrs,!1))},L=[],j={name:"InputDuplicateGrpcodeCheck",model:{prop:"value",event:"input"},props:{value:String,cbCheck:{type:Function,default:null},origin:{type:String,default:""}},watch:{origin(){this.isCheck=!!this.origin||!this.cbCheck}},data(){return{isCheck:!!this.origin||!this.cbCheck,loading:!1,errMsg:"",successMsg:""}},computed:{isSend(){return!!this.cbCheck&&0===this.$refs.field.errorBucket.length}},mounted(){},methods:{onInput(e){this.isCheck=this.origin?this.origin===e:!this.cbCheck,this.errMsg="",this.successMsg="",this.$emit("input",e)},init(){this.errMsg="",this.successMsg=""},async check(){if(!this.isSend)return;this.loading=!0,this.errMsg="",this.successMsg="";const e=await this.cbCheck(this.$store.state.user.member.c_com,this.value);this.value?0==e.cnt?(this.successMsg=`사용 가능한 ${this.$attrs.label} 입니다.`,this.isCheck=!0):(this.errMsg=`중복된 ${this.$attrs.label} 입니다.`,this.isCheck=!1):this.successMsg="",this.loading=!1},validate(){return this.isCheck||(this.errMsg=this.$attrs.label+" 중복검사를 해주세요.",this.$refs.field.focus()),this.isCheck}}},F=j,R=Object(_["a"])(F,N,L,!1,null,null,null),T=R.exports,z={components:{InputDuplicateGrpcodeCheck:T},name:"GrpcodeDetailForm",props:{data:{type:Object,default:null},keyCheckId:{type:Function,default:null},isLoad:{type:Boolean,default:null},s_sort:{type:Number,default:0}},data(){return{valid:!0,form:{c_com:"",c_gcode:"",n_gcode:"",s_sort:0,t_remark:""}}},created(){this.init()},watch:{data(){this.init()},isLoad(){this.init()}},computed:{rules:()=>h.a,originKeyId(){return this.data?this.data.c_gcode:""}},methods:{async init(){this.data?this.form=Object(d["deepCopy"])(this.data):this.form={c_com:this.$store.state.user.member.c_com,c_gcode:"",n_gcode:"",s_sort:1+(0|this.s_sort),t_remark:""},this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.c_gcode.init())},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&this.$refs.c_gcode.validate()&&(this.$emit("onSave",this.form),this.init())}}},B=z,U=Object(_["a"])(B,O,D,!1,null,null,null),q=U.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("v-toolbar",{attrs:{height:"40px","background-color":"primary"}},[t("v-toolbar-title",[e._v("Group Code")]),t("v-spacer"),t("tooltip-btn",{attrs:{label:"추가",fab:"","x-small":""},on:{click:e.addUser}},[t("v-icon",[e._v("mdi-plus")])],1),t("tooltip-btn",{attrs:{label:"삭제",fab:"","x-small":""},on:{click:e.delUser}},[t("v-icon",[e._v("mdi-minus")])],1)],1),t("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:e.headers,items:e.data,"item-key":"c_gcode","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:"500px","max-height":"500px"},on:{"click:row":e.rowSelect,"dblclick:row":e.showRowInfo}})],1)},A=[],J={components:{TooltipBtn:r["a"]},name:"GrpcodeForm",props:{data:{type:Array,default:null}},data(){return{headers:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"40px"},{text:"Code",value:"c_gcode",sortable:!1},{text:"명칭",value:"n_gcode",sortable:!1},{text:"비고",value:"t_remark",sortable:!1}],item:null}},watch:{},computed:{},methods:{async fetchData(){},async addUser(){this.$emit("onshowRowInfo")},async delUser(){this.$emit("onDelete",this.item)},rowSelect:function(e,t){t.select(!0),this.item=e,this.$emit("onSelect",e)},async showRowInfo(e,{item:t}){this.$emit("onshowRowInfo",t)}}},V=J,E=Object(_["a"])(V,K,A,!1,null,null,null),H=E.exports,P={components:{GrpcodeForm:H,ComcodeForm:G,TooltipBtn:r["a"],EzDialog:a["a"],GrpcodeDetailForm:q,ComcodeDetailForm:y},name:"Systemcode",data(){return{grpcodes:[],comcodes:[],comcode:[],comTitle:"Code",c_gcode:"",grpdetail:null,comdetail:null,isLoad:!1}},mounted(){this.fetchData()},watch:{"grpcodes.s_sort"(){console.log("grpcodes.s_sort")}},computed:{getMaxNo(){const e=Math.max(...this.grpcodes.map(e=>e.s_sort));return isFinite(e)?e:0},getComMaxNo(){const e=Math.max(...this.comcode.map(e=>e.s_sort));return isFinite(e)?e:0}},methods:{...Object(c["b"])("system",["duplicateGrpcodeCheck","duplicateComcodeCheck","iuGprCode","iuComCode"]),async fetchData(){this.grpcodes.splice(0),this.comcodes.splice(0),this.grpcodes=await this.$axios.get("/api/system/grpcode"),this.comcodes=await this.$axios.get("/api/system/comcode")},async grpSelect(e){this.c_gcode=e.c_gcode,this.comTitle="Code : "+e.c_gcode+" / "+e.n_gcode,this.comcode=this.comcodes.filter(t=>t.c_gcode==e.c_gcode&&t.c_com==e.c_com)},async grpInfo(e){this.isLoad=!0,this.grpdetail=e,this.$refs.dialogGrpcode.open()},async keyCheckGrp(e,t){const o={com:"c_com",value1:e,grp:"c_gcode",value2:t};return await this.duplicateGrpcodeCheck(o)},async grpSave(e){this.isLoading=!0;const t=await this.iuGprCode(e);if(this.isLoading=!1,t){this.$toast.info(`[${t.c_gcode}] 저장 하였습니다.`);const e=this.grpcodes.indexOf(this.grpdetail);e>=0?this.grpcodes.splice(e,1,t):this.grpcodes.push(t)}this.$refs.dialogGrpcode.close()},async comcodeSave(e){this.isLoading=!0;const t=await this.iuComCode(e);if(this.isLoading=!1,t){this.$toast.info(`[${t.c_code}] 저장 하였습니다.`);const e=this.comcodes.indexOf(this.comdetail);e>=0?this.comcodes.splice(e,1,t):this.comcodes.push(t);const o=this.comcode.indexOf(this.comdetail);o>=0?this.comcode.splice(o,1,t):this.comcode.push(t)}this.$refs.dialogComcode.close()},async comcodeInfo(e){this.isLoad=!0,this.comdetail=e,this.$refs.dialogComcode.open()},async keyCheckComcode(e,t,o){const s={com:"c_com",value1:e,grp:"c_gcode",value2:t,cod:"c_code",value3:o};return await this.duplicateComcodeCheck(s)},closeGrpcode(){this.isLoad=!1},closeComcode(){this.isLoad=!1},async delGrpcode(e){if(this.getComMaxNo)return void this.$toast.info("Code List 삭제 후 삭제 가능 합니다.");const t=this.grpcodes.indexOf(e);if(t<0)return;const o=await this.$ezNotify.confirm(`<b>Code : ${e.c_gcode}</b> 삭제 하시겠습니까 ?`,"Group Code",{icon:"mdi-delete",iconColor:"red"});if(!o)return;const s=await this.$axios.delete(`/api/system/delGprCode/${e.c_com}/${e.c_gcode}`);s&&(this.grpcodes.splice(t,1),this.$toast.info(`[${e.c_gcode}] 삭제 하였습니다.`))},async delComcode(e){const t=this.comcodes.indexOf(e),o=this.comcode.indexOf(e);if(t<0)return;const s=await this.$ezNotify.confirm(`<b>Code : ${e.c_code}</b> 삭제 하시겠습니까 ?`,"Code",{icon:"mdi-delete",iconColor:"red"});if(!s)return;const i=await this.$axios.delete(`/api/system/delComCode/${e.c_com}/${e.c_gcode}/${e.c_code}`);i&&(this.comcodes.splice(t,1),this.comcode.splice(o,1),this.$toast.info(`[${e.c_code}] 삭제 하였습니다.`))}}},Q=P,W=Object(_["a"])(Q,s,i,!1,null,null,null);t["default"]=W.exports},a2e4:function(e,t,o){"use strict";var s=function(){var e=this,t=e._self._c;return t("v-dialog",e._b({model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},"v-dialog",e.$attrs,!1),[t("v-card",[t("v-toolbar",[t("v-toolbar-title",[e._v(e._s(e.label))]),t("v-spacer"),e.obtn?t("v-btn",{attrs:{color:"primary",small:""},on:{click:e.btnClick}},[e._v(" "+e._s(e.obtn)+" ")]):e._e(),t("v-btn",{attrs:{icon:""},on:{click:e.close}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("v-card-text",[e._t("default")],2)],1)],1)},i=[],c={name:"ezDialog",props:{label:{type:String,required:!0},obtn:{type:String}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1,this.$emit("onClose")},open(){this.$emit("onOpen"),this.dialog=!0},btnClick(){this.dialog=!1,this.$emit("btnClick")}}},a=c,r=o("2877"),l=Object(r["a"])(a,s,i,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=Systemcode.b11bacb4.js.map