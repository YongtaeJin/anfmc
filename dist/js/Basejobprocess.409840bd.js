(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Basejobprocess"],{"414b":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("v-btn",e._g(e._b({class:e.childClass,on:{click:function(t){return e.$emit("click")}}},"v-btn",{...i,...e.$attrs},!1),s),[e._t("default")],2)]}}],null,!0)},[t("span",[e._v(e._s(e.label))])])},o=[],a={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},r=a,l=s("2877"),c=Object(l["a"])(r,i,o,!1,null,null,null);t["a"]=c.exports},"755d":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{fluid:""}},[t("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[t("v-toolbar-title",[e._v("공정 관리")]),t("v-spacer"),t("v-text-field",{attrs:{ense:"","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t("tooltip-btn",{attrs:{label:"조회"},on:{click:e.fatch}},[t("v-icon",[e._v("mdi-magnify")])],1),t("tooltip-btn",{attrs:{label:"추가"},on:{click:e.addItem}},[t("v-icon",[e._v("mdi-plus")])],1),t("tooltip-btn",{attrs:{label:"삭제"},on:{click:e.delItem}},[t("v-icon",[e._v("mdi-minus")])],1)],1),t("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:e.headers,items:e.items,"item-key":"c_process","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:e.iframeHeight},on:{"click:row":e.rowSelect,"dblclick:row":e.showRowInfo},scopedSlots:e._u([{key:"item.f_outside",fn:function({item:s}){return[t("v-chip",{attrs:{"x-small":"",color:e.getColor2(s.f_outside),dark:""}},[e._v(" "+e._s("Y"==s.f_outside?"외주공정":"사내공정")+" ")])]}},{key:"item.f_use",fn:function({item:s}){return[t("v-chip",{attrs:{"x-small":"",color:e.getColor(s.f_use),dark:""}},[e._v(" "+e._s("Y"==s.f_use?"사용":"중지")+" ")])]}}],null,!0)}),t("ez-dialog",{ref:"dialog",attrs:{label:"공정 등록(수정)",persistent:"",width:"500px"},on:{onClose:e.close}},[t("basejobprocess-form",{attrs:{data:e.item,keyCheckItem:e.keyCheckItem,isLoad:e.isLoad,s_sort:e.getMaxNo},on:{onSave:e.saveItem}})],1)],1)},o=[],a=(s("14d9"),s("4328")),r=s.n(a),l=s("2f62"),c=s("a2e4"),n=s("414b"),d=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"grey lighten-5"},[t("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-row",[t("v-col",{attrs:{col:"12",sm:"2",md:"2"}},[t("v-text-field",{attrs:{label:"No",rules:[e.rules.Num()],"hide-details":"false"},model:{value:e.form.s_sort,callback:function(t){e.$set(e.form,"s_sort",t)},expression:"form.s_sort"}})],1),t("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[t("input-duplicate-check",{ref:"c_process",attrs:{label:"공정코드",cbCheck:e.keyCheckItem,origin:e.originKeyId,readonly:!!e.data,rules:[e.rules.require({label:"공정코드"}),e.rules.alphaNum()]},model:{value:e.form.c_process,callback:function(t){e.$set(e.form,"c_process",t)},expression:"form.c_process"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-checkbox",{attrs:{label:"사용","true-value":"Y","false-value":"N","hide-details":"false"},model:{value:e.form.f_use,callback:function(t){e.$set(e.form,"f_use",t)},expression:"form.f_use"}})],1),t("v-col",{attrs:{col:"12",sm:"8",md:"8"}},[t("v-text-field",{attrs:{label:"공정명","hide-details":"false"},model:{value:e.form.n_process,callback:function(t){e.$set(e.form,"n_process",t)},expression:"form.n_process"}})],1),t("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[t("v-checkbox",{attrs:{label:"외부공정","true-value":"Y","false-value":"N","hide-details":"false",color:"red"},model:{value:e.form.f_outside,callback:function(t){e.$set(e.form,"f_outside",t)},expression:"form.f_outside"}})],1),t("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[t("v-text-field",{attrs:{label:"설명","hide-details":"false"},model:{value:e.form.t_remark,callback:function(t){e.$set(e.form,"t_remark",t)},expression:"form.t_remark"}})],1)],1),t("v-row",[t("v-col")],1),t("v-btn",{attrs:{type:"submit",color:"primary",block:""}},[e._v("저장")])],1)],1)},u=[],m=s("64f2"),f=s("248f"),h=s.n(f),p=s("50d8"),v=s("f075"),b={components:{InputRadio:v["a"],InputDuplicateCheck:p["a"]},name:"BasejobprocessForm",props:{data:{type:Object,default:null},keyCheckItem:{type:Function,default:null},isLoad:{type:Boolean,default:null},s_sort:{type:Number,default:0}},data(){return{valid:!0,form:{c_com:"",c_process:"",s_sort:0,n_process:"",f_outside:"N",f_use:"Y",t_remark:""},YesorNo:[{label:"사용",value:"Y"},{label:"중지",value:"N"}],OutorIn:[{label:"외주",value:"Y"},{label:"사내",value:"N"}]}},created(){this.init()},watch:{data(){this.fatch()},isLoad(){this.fatch()}},computed:{rules:()=>h.a,originKeyId(){return this.data?this.data.c_process:""}},methods:{async init(){this.fatch()},async fatch(){this.data?this.form=Object(m["deepCopy"])(this.data):this.form={c_com:this.$store.state.user.member.c_com,c_process:"",s_sort:1+(0|this.s_sort),n_process:"",f_outside:"N",f_use:"Y",t_remark:""},this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.c_process.init())},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&this.$refs.c_process.validate()&&(this.$emit("onSave",this.form),this.init())}}},_=b,g=s("2877"),k=Object(g["a"])(_,d,u,!1,null,null,null),x=k.exports,y={components:{TooltipBtn:n["a"],EzDialog:c["a"],BasejobprocessForm:x},name:"BasejobProcess",mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.init()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},data(){return{iframeHeight:500,headers:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"50px"},{text:"공정코드",value:"c_process",sortable:!1,align:"center"},{text:"공정명",value:"n_process",sortable:!1,align:"left"},{text:"공정설명",value:"t_remark",sortable:!1,align:"left"},{text:"외주공정",value:"f_outside",sortable:!1,align:"center",width:"100px"},{text:"사용여부",value:"f_use",sortable:!1,align:"center",width:"100px"}],items:[],item:null,search:"",isLoad:!1}},watch:{},computed:{getMaxNo(){const e=Math.max(...this.items.map(e=>e.s_sort));return isFinite(e)?e:0}},methods:{...Object(l["b"])("basejob",["duplicateProcessCheck","iuBaseProcess"]),adjustIframeHeight(){const e=window.innerHeight;this.iframeHeight=e-200},async init(){this.fatch()},async fatch(){const e={search:this.search.trim()},t=r.a.stringify(e);this.items&&this.items.splice(0),this.items=await this.$axios.get("/api/basejob/getBaseProcess?"+t)},async addItem(){this.isLoad=!0,this.item=null,this.$refs.dialog.open()},async delItem(){const e=this.items.indexOf(this.item);if(e<0)return;const t=await this.$ezNotify.confirm(`<b>Code : ${this.item.c_process}</b> 삭제 하시겠습니까 ?`,"Code",{icon:"mdi-delete",iconColor:"red"});if(!t)return;const s=await this.$axios.delete(`/api/basejob/delBaseProcess/${this.item.c_com}/${this.item.c_process}`);s&&(this.items.splice(e,1),this.$toast.info(`[${this.item.c_process}] 삭제 하였습니다.`))},async saveItem(e){this.isLoading=!0;const t=await this.iuBaseProcess(e);if(this.isLoading=!1,t){this.$toast.info(`[${t.c_process}] 저장 하였습니다.`);const e=this.items.indexOf(this.item);e>=0?this.items.splice(e,1,t):this.items.push(t)}this.$refs.dialog.close()},async close(){this.isLoad=!1,this.item=null},async keyCheckItem(e){const t={c_process:"c_process",value:e};return await this.duplicateProcessCheck(t)},getColor(e){return"N"==e?"red":"green"},getColor2(e){return"Y"==e?"red":"green"},rowSelect:function(e,t){t.select(!0),this.item=e},async showRowInfo(e,{item:t}){this.isLoad=!0,this.item=t,this.$refs.dialog.open()}}},w=y,$=Object(g["a"])(w,i,o,!1,null,null,null);t["default"]=$.exports},a2e4:function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("v-dialog",e._b({model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},"v-dialog",e.$attrs,!1),[t("v-card",[t("v-toolbar",[t("v-toolbar-title",[e._v(e._s(e.label))]),t("v-spacer"),e.obtn?t("v-btn",{attrs:{color:"primary",small:""},on:{click:e.btnClick}},[e._v(" "+e._s(e.obtn)+" ")]):e._e(),t("v-btn",{attrs:{icon:""},on:{click:e.close}},[t("v-icon",[e._v("mdi-close")])],1)],1),t("v-card-text",[e._t("default")],2)],1)],1)},o=[],a={name:"ezDialog",props:{label:{type:String,required:!0},obtn:{type:String}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1,this.$emit("onClose")},open(){this.$emit("onOpen"),this.dialog=!0},btnClick(){this.dialog=!1,this.$emit("btnClick")}}},r=a,l=s("2877"),c=Object(l["a"])(r,i,o,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=Basejobprocess.409840bd.js.map