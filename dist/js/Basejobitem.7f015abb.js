(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Basejobitem"],{"414b":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({class:t.childClass,on:{click:function(e){return t.$emit("click")}}},"v-btn",{...s,...t.$attrs},!1),i),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},a=[],l={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},o=l,r=i("2877"),n=Object(r["a"])(o,s,a,!1,null,null,null);e["a"]=n.exports},"8267e":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{attrs:{height:"40px","background-color":"primary",dark:""}},[e("v-toolbar-title",[t._v("품목 관리")]),e("v-spacer"),e("v-text-field",{attrs:{ense:"","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e("tooltip-btn",{attrs:{label:"조회"},on:{click:t.fatch}},[e("v-icon",[t._v("mdi-magnify")])],1),e("tooltip-btn",{attrs:{label:"추가"},on:{click:t.addItem}},[e("v-icon",[t._v("mdi-plus")])],1),e("tooltip-btn",{attrs:{label:"삭제"},on:{click:t.delItem}},[e("v-icon",[t._v("mdi-minus")])],1)],1),e("v-data-table",{staticClass:"elevation-1 text-no-wrap",attrs:{headers:t.headers,items:t.items,"item-key":"c_item","single-select":"","items-per-page":-1,"hide-default-footer":"","footer-props":{"items-per-page-options":[10,20,30,40,50,100,-1]},height:t.iframeHeight},on:{"click:row":t.rowSelect,"dblclick:row":t.showRowInfo},scopedSlots:t._u([{key:"item.i_unit",fn:function({item:e}){return[t._v(" "+t._s(t.getNameUnit(e.i_unit))+" ")]}},{key:"item.i_type",fn:function({item:e}){return[t._v(" "+t._s(t.getNameType(e.i_type))+" ")]}},{key:"item.a_bye",fn:function({item:i}){return[e("div",{staticClass:"right2-align"},[t._v(t._s(i.a_bye.toLocaleString()))])]}},{key:"item.a_sell",fn:function({item:i}){return[e("div",{staticClass:"right2-align"},[t._v(t._s(i.a_sell.toLocaleString()))])]}},{key:"item.f_use",fn:function({item:i}){return[e("v-chip",{attrs:{"x-small":"",color:t.getColor(i.f_use),dark:""}},[t._v(" "+t._s("Y"==i.f_use?"사용":"중지")+" ")])]}},{key:"item.t_remark",fn:function({item:i}){return[e("div",{staticClass:"left-align"},[t._v(t._s(i.t_remark))])]}}],null,!0)}),e("ez-dialog",{ref:"dialog",attrs:{label:"품목 등록(수정)",persistent:"",width:"500px"},on:{onClose:t.close}},[e("basejobitem-form",{attrs:{data:t.item,keyCheckItem:t.keyCheckItem,isLoad:t.isLoad,s_sort:t.getMaxNo,units:t.units,itemtypes:t.itemtypes},on:{onSave:t.saveItem}})],1)],1)},a=[],l=(i("14d9"),i("4328")),o=i.n(l),r=i("2f62"),n=i("a2e4"),c=i("414b"),m=function(){var t=this,e=t._self._c;return e("v-container",{staticClass:"grey lighten-5"},[e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-row",[e("v-col",{attrs:{col:"12",sm:"2",md:"2"}},[e("v-text-field",{attrs:{label:"No",rules:[t.rules.Num()],"hide-details":"false"},model:{value:t.form.s_sort,callback:function(e){t.$set(t.form,"s_sort",e)},expression:"form.s_sort"}})],1),e("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[e("input-duplicate-check",{ref:"c_item",attrs:{label:"품번",cbCheck:t.keyCheckItem,origin:t.originKeyId,readonly:!!t.data,rules:[t.rules.require({label:"품번1"}),t.rules.alphaNumDash()]},model:{value:t.form.c_item,callback:function(e){t.$set(t.form,"c_item",e)},expression:"form.c_item"}})],1),e("v-col",{attrs:{col:"12",sm:"4",md:"4"}},[e("v-checkbox",{attrs:{label:"사용","true-value":"Y","false-value":"N","hide-details":"false"},model:{value:t.form.f_use,callback:function(e){t.$set(t.form,"f_use",e)},expression:"form.f_use"}})],1),e("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[e("v-text-field",{attrs:{label:"품명","hide-details":"false"},model:{value:t.form.n_item,callback:function(e){t.$set(t.form,"n_item",e)},expression:"form.n_item"}})],1),e("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[e("v-text-field",{attrs:{label:"사양(규격)","hide-details":"false"},model:{value:t.form.t_size,callback:function(e){t.$set(t.form,"t_size",e)},expression:"form.t_size"}})],1),e("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[e("v-select",{attrs:{label:"단위",items:t.units,"item-text":"n_code","item-value":"c_code"},model:{value:t.form.i_unit,callback:function(e){t.$set(t.form,"i_unit",e)},expression:"form.i_unit"}})],1),e("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[e("v-select",{attrs:{label:"제품타입",items:t.itemtypes,"item-text":"n_code","item-value":"c_code"},model:{value:t.form.i_type,callback:function(e){t.$set(t.form,"i_type",e)},expression:"form.i_type"}})],1),e("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[e("v-text-field",{attrs:{label:"구매단가","hide-details":"false"},model:{value:t.form.a_bye,callback:function(e){t.$set(t.form,"a_bye",e)},expression:"form.a_bye"}})],1),e("v-col",{attrs:{col:"12",sm:"6",md:"6"}},[e("v-text-field",{attrs:{label:"판매단가","hide-details":"false"},model:{value:t.form.a_sell,callback:function(e){t.$set(t.form,"a_sell",e)},expression:"form.a_sell"}})],1),e("v-col",{attrs:{col:"12",sm:"12",md:"12"}},[e("v-text-field",{attrs:{label:"비고","hide-details":"false"},model:{value:t.form.t_remark,callback:function(e){t.$set(t.form,"t_remark",e)},expression:"form.t_remark"}})],1)],1),e("v-row",[e("v-col")],1),e("v-btn",{attrs:{type:"submit",color:"primary",block:""}},[t._v("저장")])],1)],1)},d=[],u=i("64f2"),f=i("248f"),h=i.n(f),_=i("50d8"),v=i("f075"),p={components:{InputRadio:v["a"],InputDuplicateCheck:_["a"]},name:"BasejobvendForm",props:{data:{type:Object,default:null},keyCheckItem:{type:Function,default:null},isLoad:{type:Boolean,default:null},s_sort:{type:Number,default:0},units:{type:Array,default:null},itemtypes:{type:Array,default:null}},data(){return{valid:!0,form:{c_com:"",c_item:"",s_sort:0,n_item:"",t_size:"",i_unit:"",i_type:"",a_bye:0,a_sell:0,f_use:"Y",t_remark:""},YesorNo:[{label:"사용",value:"Y"},{label:"중지",value:"N"}]}},created(){this.init()},watch:{data(){this.fatch()},isLoad(){this.fatch()}},computed:{rules:()=>h.a,originKeyId(){return this.data?this.data.c_item:""}},methods:{async init(){this.fatch()},async fatch(){this.data?this.form=Object(u["deepCopy"])(this.data):this.form={c_com:this.$store.state.user.member.c_com,c_item:"",s_sort:1+(0|this.s_sort),n_item:"",t_size:"",i_unit:"",i_type:"",a_bye:0,a_sell:0,f_use:"Y",t_remark:""},this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.c_item.init())},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&this.$refs.c_item.validate()&&(this.$emit("onSave",this.form),this.init())}}},b=p,g=i("2877"),y=Object(g["a"])(b,m,d,!1,null,null,null),k=y.exports,x={components:{TooltipBtn:c["a"],EzDialog:n["a"],BasejobitemForm:k},name:"BasejobItem",mounted(){window.addEventListener("resize",this.adjustIframeHeight),this.adjustIframeHeight(),this.init()},beforeDestroy(){window.removeEventListener("resize",this.adjustIframeHeight)},data(){return{iframeHeight:500,headers:[{text:"No",value:"s_sort",sortable:!1,align:"center",width:"50px"},{text:"품번",value:"c_item",sortable:!1,align:"center",width:"100px"},{text:"품명",value:"n_item",sortable:!1,align:"center",width:"30%"},{text:"사양",value:"t_size",sortable:!1,align:"center",width:"30%"},{text:"단위",value:"i_unit",sortable:!1,align:"center",width:"60px"},{text:"제품타입",value:"i_type",sortable:!1,align:"center",width:"100px"},{text:"구매단가",value:"a_bye",sortable:!1,align:"center",width:"80px"},{text:"판매단가",value:"a_sell",sortable:!1,align:"center",width:"80px"},{text:"사용",value:"f_use",sortable:!1,align:"center",width:"60px"},{text:"비고",value:"t_remark",sortable:!1,align:"center",width:"40%"}],items:[],item:null,search:"",isLoad:!1,units:[],itemtypes:[]}},watch:{},computed:{getMaxNo(){const t=Math.max(...this.items.map(t=>t.s_sort));return isFinite(t)?t:0}},methods:{...Object(r["b"])("basejob",["duplicateItemCheck","iuBaseItem"]),adjustIframeHeight(){const t=window.innerHeight;this.iframeHeight=t-200},getNameUnit(t){const e=this.units.find(e=>e.c_code==t);return e?e.n_code:""},getNameType(t){const e=this.itemtypes.find(e=>e.c_code==t);return e?e.n_code:""},async init(){const t={c_com:this.$store.state.user.member.c_com,c_gcode:"UNIT"};var e=o.a.stringify(t);this.units=await this.$axios.get("/api/system/getCodeList?"+e);const i={c_com:this.$store.state.user.member.c_com,c_gcode:"ITEMTYPE"};e=o.a.stringify(i),this.itemtypes=await this.$axios.get("/api/system/getCodeList?"+e),this.fatch()},async fatch(){const t={search:this.search.trim()},e=o.a.stringify(t);this.items&&this.items.splice(0),this.items=await this.$axios.get("/api/basejob/getBaseItem?"+e)},async addItem(){this.isLoad=!0,this.item=null,this.$refs.dialog.open()},async delItem(){const t=this.items.indexOf(this.item);if(t<0)return;const e=await this.$ezNotify.confirm(`<b>Code : ${this.item.c_item}</b> 삭제 하시겠습니까 ?`,"Code",{icon:"mdi-delete",iconColor:"red"});if(!e)return;const i=await this.$axios.delete(`/api/basejob/delBaseItem/${this.item.c_com}/${this.item.c_item}`);i&&(this.items.splice(t,1),this.$toast.info(`[${this.item.c_item}] 삭제 하였습니다.`))},async saveItem(t){this.isLoading=!0;const e=await this.iuBaseItem(t);if(this.isLoading=!1,e){this.$toast.info(`[${e.c_item}] 저장 하였습니다.`);const t=this.items.indexOf(this.item);t>=0?this.items.splice(t,1,e):this.items.push(e)}this.$refs.dialog.close()},async close(){this.isLoad=!1,this.item=null},async keyCheckItem(t){const e={c_item:"c_item",value:t};return await this.duplicateItemCheck(e)},getColor(t){return"N"==t?"red":"green"},rowSelect:function(t,e){e.select(!0),this.item=t},async showRowInfo(t,{item:e}){this.isLoad=!0,this.item=e,this.$refs.dialog.open()}}},w=x,$=Object(g["a"])(w,s,a,!1,null,null,null);e["default"]=$.exports},a2e4:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-dialog",t._b({model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},"v-dialog",t.$attrs,!1),[e("v-card",[e("v-toolbar",[e("v-toolbar-title",[t._v(t._s(t.label))]),e("v-spacer"),t.obtn?e("v-btn",{attrs:{color:"primary",small:""},on:{click:t.btnClick}},[t._v(" "+t._s(t.obtn)+" ")]):t._e(),e("v-btn",{attrs:{icon:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[t._t("default")],2)],1)],1)},a=[],l={name:"ezDialog",props:{label:{type:String,required:!0},obtn:{type:String}},data(){return{dialog:!1}},methods:{close(){this.dialog=!1,this.$emit("onClose")},open(){this.$emit("onOpen"),this.dialog=!0},btnClick(){this.dialog=!1,this.$emit("btnClick")}}},o=l,r=i("2877"),n=Object(r["a"])(o,s,a,!1,null,null,null);e["a"]=n.exports}}]);
//# sourceMappingURL=Basejobitem.7f015abb.js.map